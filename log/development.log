  [1m[35m (113.6ms)[0m  [1m[35mCREATE DATABASE "product_backend_development" ENCODING = 'unicode'[0m
  [1m[35m (58.9ms)[0m  [1m[35mCREATE DATABASE "product_backend_test" ENCODING = 'unicode'[0m
  [1m[35m (8.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2023-11-10 15:26:52.331791', '2023-11-10 15:26:52.331793') RETURNING "key"[0m
Migrating to CreateUsers (20231110152455)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying NOT NULL, "password_digest" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110152455') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to CreateCards (20231110153707)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (12.5ms)[0m  [1m[35mCREATE TABLE "cards" ("id" bigserial primary key, "name" character varying, "price" decimal, "pin" character varying, "status" boolean, "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_8ef7749967"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_cards_on_user_id" ON "cards" ("user_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110153707') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateCards (20231110153707)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.2ms)[0m  [1m[35mDROP TABLE "cards"[0m
  [1m[36mActiveRecord::SchemaMigration Destroy (0.5ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = '20231110153707'[0m
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUsers (20231110152455)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[36mActiveRecord::SchemaMigration Destroy (0.2ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = '20231110152455'[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to CreateUsers (20231110152455)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying NOT NULL, "name" character varying NOT NULL, "role" character varying NOT NULL, "status" boolean NOT NULL, "password_digest" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110152455') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCards (20231110153707)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE TABLE "cards" ("id" bigserial primary key, "name" character varying, "price" decimal, "pin" character varying, "status" boolean, "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_8ef7749967"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_cards_on_user_id" ON "cards" ("user_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110153707') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to CreateBrands (20231110155231)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.4ms)[0m  [1m[35mCREATE TABLE "brands" ("id" bigserial primary key, "name" character varying, "avatar" character varying, "short_name" character varying, "status" boolean, "store_number" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110155231') RETURNING "version"[0m
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProducts (20231110155459)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying, "avatar" character varying, "sku" character varying, "status" boolean, "price" decimal, "brand_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f3b4d49caa"
FOREIGN KEY ("brand_id")
  REFERENCES "brands" ("id")
)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_products_on_brand_id" ON "products" ("brand_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110155459') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCardProducts (20231110160118)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.4ms)[0m  [1m[35mCREATE TABLE "card_products" ("id" bigserial primary key, "card_id" bigint NOT NULL, "product_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f95aa900bf"
FOREIGN KEY ("card_id")
  REFERENCES "cards" ("id")
, CONSTRAINT "fk_rails_0c6f04d089"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_card_products_on_card_id" ON "card_products" ("card_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_card_products_on_product_id" ON "card_products" ("product_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110160118') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mBrand Load (2.6ms)[0m  [1m[34mSELECT "brands".* FROM "brands"[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mBrand Load (0.8ms)[0m  [1m[34mSELECT "brands".* FROM "brands"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (2.8ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "KFC"], ["avatar", "https://www.gravatar.com/avatar/0?s=64&d=identicon&r=PG"], ["short_name", "KFC"], ["status", true], ["store_number", 12], ["created_at", "2023-11-10 16:21:09.798432"], ["updated_at", "2023-11-10 16:21:09.798432"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.6ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "the coffee house"], ["avatar", "https://www.gravatar.com/avatar/7?s=64&d=identicon&r=PG"], ["short_name", "TCH"], ["status", true], ["store_number", 232], ["created_at", "2023-11-10 16:21:09.802733"], ["updated_at", "2023-11-10 16:21:09.802733"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.5ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "circle K"], ["avatar", "https://www.gravatar.com/avatar/12?s=64&d=identicon&r=PG"], ["short_name", "CRK"], ["status", true], ["store_number", 156], ["created_at", "2023-11-10 16:21:09.804143"], ["updated_at", "2023-11-10 16:21:09.804143"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mBrand Count (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "brands"[0m
Started GET "/" for 127.0.0.1 at 2023-11-10 23:21:35 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#index as HTML
  [1m[36mBrand Load (0.8ms)[0m  [1m[34mSELECT "brands".* FROM "brands"[0m
  ↳ app/controllers/home_controller.rb:4:in `index'
Completed 200 OK in 66ms (Views: 9.8ms | ActiveRecord: 42.7ms | Allocations: 23253)


Started GET "/" for 127.0.0.1 at 2023-11-10 23:21:46 +0700
Processing by HomeController#index as HTML
  [1m[36mBrand Load (0.5ms)[0m  [1m[34mSELECT "brands".* FROM "brands"[0m
  ↳ app/controllers/home_controller.rb:4:in `index'
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.5ms | Allocations: 1012)


Started GET "/favicon.ico" for 127.0.0.1 at 2023-11-10 23:21:46 +0700
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started GET "/" for 127.0.0.1 at 2023-11-10 23:21:54 +0700
Processing by HomeController#index as HTML
  [1m[36mBrand Load (0.4ms)[0m  [1m[34mSELECT "brands".* FROM "brands"[0m
  ↳ app/controllers/home_controller.rb:4:in `index'
Completed 200 OK in 3ms (Views: 2.2ms | ActiveRecord: 0.4ms | Allocations: 1071)


Started GET "/" for 127.0.0.1 at 2023-11-10 23:21:55 +0700
Processing by HomeController#index as HTML
  [1m[36mBrand Load (0.7ms)[0m  [1m[34mSELECT "brands".* FROM "brands"[0m
  ↳ app/controllers/home_controller.rb:4:in `index'
Completed 200 OK in 4ms (Views: 2.3ms | ActiveRecord: 0.7ms | Allocations: 903)


Started GET "/favicon.ico" for 127.0.0.1 at 2023-11-10 23:21:55 +0700
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started GET "/" for 127.0.0.1 at 2023-11-10 23:21:56 +0700
Processing by HomeController#index as HTML
  [1m[36mBrand Load (0.4ms)[0m  [1m[34mSELECT "brands".* FROM "brands"[0m
  ↳ app/controllers/home_controller.rb:4:in `index'
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.4ms | Allocations: 889)


Started GET "/favicon.ico" for 127.0.0.1 at 2023-11-10 23:21:56 +0700
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started GET "/" for ::1 at 2023-11-10 23:22:00 +0700
Processing by HomeController#index as HTML
  [1m[36mBrand Load (0.6ms)[0m  [1m[34mSELECT "brands".* FROM "brands"[0m
  ↳ app/controllers/home_controller.rb:4:in `index'
Completed 200 OK in 4ms (Views: 2.7ms | ActiveRecord: 0.6ms | Allocations: 903)


  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mBrand Load (0.9ms)[0m  [1m[34mSELECT "brands".* FROM "brands"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Destroy (1.9ms)[0m  [1m[31mDELETE FROM "brands" WHERE "brands"."id" = $1[0m  [["id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Destroy (0.7ms)[0m  [1m[31mDELETE FROM "brands" WHERE "brands"."id" = $1[0m  [["id", 2]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Destroy (0.6ms)[0m  [1m[31mDELETE FROM "brands" WHERE "brands"."id" = $1[0m  [["id", 3]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mBrand Load (1.8ms)[0m  [1m[34mSELECT "brands".* FROM "brands"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.9ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "KFC"], ["avatar", "https://www.gravatar.com/avatar/5?s=64&d=identicon&r=PG"], ["short_name", "KFC"], ["status", true], ["store_number", 12], ["created_at", "2023-11-10 16:25:44.920944"], ["updated_at", "2023-11-10 16:25:44.920944"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.6ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "the coffee house"], ["avatar", "https://www.gravatar.com/avatar/12?s=64&d=identicon&r=PG"], ["short_name", "TCH"], ["status", true], ["store_number", 232], ["created_at", "2023-11-10 16:25:44.923300"], ["updated_at", "2023-11-10 16:25:44.923300"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.6ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "circle K"], ["avatar", "https://www.gravatar.com/avatar/9?s=64&d=identicon&r=PG"], ["short_name", "CRK"], ["status", true], ["store_number", 156], ["created_at", "2023-11-10 16:25:44.924805"], ["updated_at", "2023-11-10 16:25:44.924805"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mBrand Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "brands"[0m
Started GET "/" for 127.0.0.1 at 2023-11-10 23:25:54 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#index as HTML
  [1m[36mBrand Load (0.7ms)[0m  [1m[34mSELECT "brands".* FROM "brands"[0m
  ↳ app/controllers/home_controller.rb:4:in `index'
Completed 200 OK in 30ms (Views: 14.2ms | ActiveRecord: 8.9ms | Allocations: 22272)


Started GET "/" for 127.0.0.1 at 2023-11-10 23:25:56 +0700
Processing by HomeController#index as HTML
  [1m[36mBrand Load (1.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands"[0m
  ↳ app/controllers/home_controller.rb:4:in `index'
Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 1.0ms | Allocations: 1013)


Started GET "/favicon.ico" for 127.0.0.1 at 2023-11-10 23:25:56 +0700
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started GET "/" for 127.0.0.1 at 2023-11-10 23:25:57 +0700
Processing by HomeController#index as HTML
  [1m[36mBrand Load (1.1ms)[0m  [1m[34mSELECT "brands".* FROM "brands"[0m
  ↳ app/controllers/home_controller.rb:4:in `index'
Completed 200 OK in 4ms (Views: 2.4ms | ActiveRecord: 1.1ms | Allocations: 1072)


Started GET "/favicon.ico" for 127.0.0.1 at 2023-11-10 23:25:57 +0700
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started GET "/" for 127.0.0.1 at 2023-11-10 23:25:57 +0700
Processing by HomeController#index as HTML
  [1m[36mBrand Load (0.3ms)[0m  [1m[34mSELECT "brands".* FROM "brands"[0m
  ↳ app/controllers/home_controller.rb:4:in `index'
Completed 200 OK in 1ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 890)


Started GET "/favicon.ico" for 127.0.0.1 at 2023-11-10 23:25:57 +0700
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
  [1m[36mBrand Load (1.7ms)[0m  [1m[34mSELECT "brands".* FROM "brands" /* loading for pp */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mBrand Load (1.1ms)[0m  [1m[34mSELECT "brands".* FROM "brands"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Destroy (3.6ms)[0m  [1m[31mDELETE FROM "brands" WHERE "brands"."id" = $1[0m  [["id", 4]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Destroy (1.0ms)[0m  [1m[31mDELETE FROM "brands" WHERE "brands"."id" = $1[0m  [["id", 5]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Destroy (0.8ms)[0m  [1m[31mDELETE FROM "brands" WHERE "brands"."id" = $1[0m  [["id", 6]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mBrand Load (0.9ms)[0m  [1m[34mSELECT "brands".* FROM "brands" /* loading for pp */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (1.9ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "KFC"], ["avatar", "https://www.gravatar.com/avatar/6?s=64&d=identicon&r=PG"], ["short_name", "KFC"], ["status", true], ["store_number", 12], ["created_at", "2023-11-10 16:29:51.186633"], ["updated_at", "2023-11-10 16:29:51.186633"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mBrand Load (0.9ms)[0m  [1m[34mSELECT "brands".* FROM "brands" /* loading for pp */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mBrand Load (0.3ms)[0m  [1m[34mSELECT "brands".* FROM "brands" ORDER BY "brands"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from <main> at bin/rails:4)
Started POST "/register" for ::1 at 2023-11-11 01:32:49 +0700
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RegistrationsController#create as */*
Completed 400 Bad Request in 33ms (ActiveRecord: 0.0ms | Allocations: 7211)


  
ActionController::ParameterMissing (param is missing or the value is empty: users):
  
app/controllers/registrations_controller.rb:17:in `user_params'
app/controllers/registrations_controller.rb:3:in `create'
Started POST "/register" for ::1 at 2023-11-11 01:35:43 +0700
Processing by RegistrationsController#create as */*
  Parameters: {"email"=>"thai@gmail.com", "password"=>"[FILTERED]"}
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms | Allocations: 919)


  
ActionController::ParameterMissing (param is missing or the value is empty: users):
  
app/controllers/registrations_controller.rb:17:in `user_params'
app/controllers/registrations_controller.rb:3:in `create'
Started POST "/register" for ::1 at 2023-11-11 01:38:19 +0700
Processing by RegistrationsController#create as */*
Completed 400 Bad Request in 0ms (ActiveRecord: 0.0ms | Allocations: 135)


  
ActionController::ParameterMissing (param is missing or the value is empty: users):
  
app/controllers/registrations_controller.rb:17:in `user_params'
app/controllers/registrations_controller.rb:3:in `create'
Started POST "/register" for ::1 at 2023-11-11 01:38:48 +0700
Processing by RegistrationsController#create as */*
Completed 400 Bad Request in 178989ms (ActiveRecord: 0.0ms | Allocations: 204879)


  
ActionController::ParameterMissing (param is missing or the value is empty: users):
  
app/controllers/registrations_controller.rb:18:in `user_params'
app/controllers/registrations_controller.rb:3:in `create'
Started POST "/register" for ::1 at 2023-11-11 01:42:20 +0700
Processing by RegistrationsController#create as */*
  Parameters: {"users"=>{"email"=>"thai@gmail.com"}, "user"=>{"password"=>"[FILTERED]"}}
Completed 200 OK in 56953ms (Views: 0.2ms | ActiveRecord: 27.0ms | Allocations: 159818)


Started POST "/register" for ::1 at 2023-11-11 01:43:41 +0700
Processing by RegistrationsController#create as */*
  Parameters: {"users"=>{"email"=>"thai@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/registrations_controller.rb:4:in `create'
  [1m[36mUser Create (9.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "role", "status", "password_digest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "thai@gmail.com"], ["name", nil], ["role", nil], ["status", nil], ["password_digest", "[FILTERED]"], ["created_at", "2023-11-10 18:43:58.158825"], ["updated_at", "2023-11-10 18:43:58.158825"]]
  ↳ app/controllers/registrations_controller.rb:4:in `create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/registrations_controller.rb:4:in `create'
Completed 500 Internal Server Error in 16855ms (ActiveRecord: 10.2ms | Allocations: 112807)


  
ActiveRecord::NotNullViolation (PG::NotNullViolation: ERROR:  null value in column "name" of relation "users" violates not-null constraint
DETAIL:  Failing row contains (1, thai@gmail.com, null, null, null, $2a$12$ZnGwqHwj/LYRVA1SQTHj1OqA3Fp6f0UNO/Qwv9Q3sjOCeOcPwLgwi, 2023-11-10 18:43:58.158825, 2023-11-10 18:43:58.158825).
):
  
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (4.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (37.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "product_backend_development"[0m
  [1m[35m (20.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "product_backend_test"[0m
  [1m[35m (132.1ms)[0m  [1m[35mCREATE DATABASE "product_backend_development" ENCODING = 'unicode'[0m
  [1m[35m (38.1ms)[0m  [1m[35mCREATE DATABASE "product_backend_test" ENCODING = 'unicode'[0m
  [1m[35m (12.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2023-11-10 18:45:20.145483', '2023-11-10 18:45:20.145486') RETURNING "key"[0m
Migrating to CreateUsers (20231110152455)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "role" character varying, "status" boolean, "password_digest" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110152455') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCards (20231110153707)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.3ms)[0m  [1m[35mCREATE TABLE "cards" ("id" bigserial primary key, "name" character varying, "price" decimal, "pin" character varying, "status" boolean, "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_8ef7749967"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_cards_on_user_id" ON "cards" ("user_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110153707') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBrands (20231110155231)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "brands" ("id" bigserial primary key, "name" character varying, "avatar" character varying, "short_name" character varying, "status" boolean, "store_number" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110155231') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProducts (20231110155459)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying, "avatar" character varying, "sku" character varying, "status" boolean, "price" decimal, "brand_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f3b4d49caa"
FOREIGN KEY ("brand_id")
  REFERENCES "brands" ("id")
)[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE INDEX "index_products_on_brand_id" ON "products" ("brand_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110155459') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCardProducts (20231110160118)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "card_products" ("id" bigserial primary key, "card_id" bigint NOT NULL, "product_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f95aa900bf"
FOREIGN KEY ("card_id")
  REFERENCES "cards" ("id")
, CONSTRAINT "fk_rails_0c6f04d089"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_card_products_on_card_id" ON "card_products" ("card_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_card_products_on_product_id" ON "card_products" ("product_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110160118') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/register" for ::1 at 2023-11-11 01:45:52 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RegistrationsController#create as */*
  Parameters: {"users"=>{"email"=>"thai@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mTRANSACTION (6.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/registrations_controller.rb:5:in `create'
  [1m[36mUser Create (111.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "role", "status", "password_digest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "thai@gmail.com"], ["name", nil], ["role", nil], ["status", nil], ["password_digest", "[FILTERED]"], ["created_at", "2023-11-10 18:46:19.741405"], ["updated_at", "2023-11-10 18:46:19.741405"]]
  ↳ app/controllers/registrations_controller.rb:5:in `create'
  [1m[36mTRANSACTION (5.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/registrations_controller.rb:5:in `create'
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from encode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:8)
Completed 500 Internal Server Error in 42304ms (ActiveRecord: 127.8ms | Allocations: 1405260)


  
NameError (undefined local variable or method `‘HS256’' for JsonWebTokenService:Class):
  
app/controllers/registrations_controller.rb:6:in `create'
Started POST "/register" for ::1 at 2023-11-11 01:47:33 +0700
Processing by RegistrationsController#create as */*
  Parameters: {"users"=>{"email"=>"thai@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/registrations_controller.rb:5:in `create'
  [1m[36mUser Create (2.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "role", "status", "password_digest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "thai@gmail.com"], ["name", nil], ["role", nil], ["status", nil], ["password_digest", "[FILTERED]"], ["created_at", "2023-11-10 18:47:38.022163"], ["updated_at", "2023-11-10 18:47:38.022163"]]
  ↳ app/controllers/registrations_controller.rb:5:in `create'
  [1m[36mTRANSACTION (10.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/registrations_controller.rb:5:in `create'
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from encode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:8)
Completed 201 Created in 3971ms (Views: 0.6ms | ActiveRecord: 17.1ms | Allocations: 117121)


DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:13)
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from encode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:8)
Started GET "/" for ::1 at 2023-11-11 10:39:01 +0700
Processing by HomeController#index as HTML
  [1m[36mBrand Load (16.6ms)[0m  [1m[34mSELECT "brands".* FROM "brands"[0m
  ↳ app/controllers/home_controller.rb:4:in `index'
Completed 200 OK in 26ms (Views: -7.1ms | ActiveRecord: 26.6ms | Allocations: 5644)


DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from encode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:8)
Started POST "/auth/login" for ::1 at 2023-11-11 13:14:30 +0700
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"thai@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/authentication_controller.rb:3:in `login'
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from encode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:7)
Completed 202 Accepted in 275ms (Views: 0.4ms | ActiveRecord: 15.6ms | Allocations: 23624)


DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
Started POST "/auth/login" for ::1 at 2023-11-11 13:21:22 +0700
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"thai@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/authentication_controller.rb:3:in `login'
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from encode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:7)
Completed 202 Accepted in 258ms (Views: 0.3ms | ActiveRecord: 7.2ms | Allocations: 8653)


DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from encode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:7)
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
Started POST "/api/v1/brands" for ::1 at 2023-11-11 13:40:45 +0700
  
Zeitwerk::NameError (expected file /Users/thaiphuc/projects/product-backend/app/controllers/api/v1/brands_controller.rb to define constant Api::V1::BrandsController, but didn't

      raise Zeitwerk::NameError.new(msg, cref.last)
      ^^^^^):
  
zeitwerk (2.6.12) lib/zeitwerk/loader/callbacks.rb:33:in `on_file_autoloaded'
zeitwerk (2.6.12) lib/zeitwerk/kernel.rb:31:in `require'
activesupport (7.1.1) lib/active_support/inflector/methods.rb:290:in `const_get'
activesupport (7.1.1) lib/active_support/inflector/methods.rb:290:in `constantize'
activesupport (7.1.1) lib/active_support/core_ext/string/inflections.rb:74:in `constantize'
actionpack (7.1.1) lib/action_dispatch/http/request.rb:90:in `controller_class_for'
actionpack (7.1.1) lib/action_dispatch/request/utils.rb:100:in `action_encoding_template'
actionpack (7.1.1) lib/action_dispatch/request/utils.rb:85:in `encode'
actionpack (7.1.1) lib/action_dispatch/request/utils.rb:45:in `set_binary_encoding'
actionpack (7.1.1) lib/action_dispatch/http/parameters.rb:68:in `path_parameters='
actionpack (7.1.1) lib/action_dispatch/journey/router.rb:48:in `block in serve'
actionpack (7.1.1) lib/action_dispatch/journey/router.rb:131:in `block in find_routes'
actionpack (7.1.1) lib/action_dispatch/journey/router.rb:124:in `each'
actionpack (7.1.1) lib/action_dispatch/journey/router.rb:124:in `find_routes'
actionpack (7.1.1) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.1.1) lib/action_dispatch/routing/route_set.rb:882:in `call'
rack (3.0.8) lib/rack/etag.rb:29:in `call'
rack (3.0.8) lib/rack/conditional_get.rb:43:in `call'
rack (3.0.8) lib/rack/head.rb:15:in `call'
activerecord (7.1.1) lib/active_record/migration.rb:653:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (7.1.1) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.1.1) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/actionable_exceptions.rb:16:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (7.1.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (7.1.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (7.1.1) lib/active_support/tagged_logging.rb:135:in `block in tagged'
activesupport (7.1.1) lib/active_support/tagged_logging.rb:39:in `tagged'
activesupport (7.1.1) lib/active_support/tagged_logging.rb:135:in `tagged'
activesupport (7.1.1) lib/active_support/broadcast_logger.rb:232:in `method_missing'
railties (7.1.1) lib/rails/rack/logger.rb:24:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/remote_ip.rb:92:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/request_id.rb:28:in `call'
rack (3.0.8) lib/rack/runtime.rb:24:in `call'
activesupport (7.1.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/server_timing.rb:59:in `block in call'
actionpack (7.1.1) lib/action_dispatch/middleware/server_timing.rb:24:in `collect_events'
actionpack (7.1.1) lib/action_dispatch/middleware/server_timing.rb:58:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.8) lib/rack/sendfile.rb:114:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/host_authorization.rb:141:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (7.1.1) lib/rails/engine.rb:529:in `call'
puma (6.4.0) lib/puma/configuration.rb:272:in `call'
puma (6.4.0) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.0) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.0) lib/puma/request.rb:99:in `handle_request'
puma (6.4.0) lib/puma/server.rb:443:in `process_client'
puma (6.4.0) lib/puma/server.rb:241:in `block in run'
puma (6.4.0) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
Started POST "/api/v1/brands" for ::1 at 2023-11-11 13:41:07 +0700
  
ActionController::RoutingError (uninitialized constant Api::V1::BrandsController

      Object.const_get(camel_cased_word)
            ^^^^^^^^^^
Did you mean?  Api::V1::CardsController

            raise MissingController.new(error.message, error.name)
            ^^^^^):
  
Started POST "/api/v1/brands" for ::1 at 2023-11-11 13:42:34 +0700
Processing by Api::V1::BrandsController#create as */*
  Parameters: {"brand"=>{"name"=>"\"thaithai\""}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 473)


  
JWT::DecodeError (Nil JSON web token):
  
lib/authenticate_helper.rb:4:in `authenticate_user'
Started POST "/auth/login" for ::1 at 2023-11-11 13:45:01 +0700
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"thai@gmail.com", "password"=>"[FILTERED]"}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms | Allocations: 260)


  
JWT::DecodeError (Nil JSON web token):
  
lib/authenticate_helper.rb:4:in `authenticate_user'
Started POST "/auth/login" for ::1 at 2023-11-11 13:47:31 +0700
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"thai@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/authentication_controller.rb:3:in `login'
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from encode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:7)
Completed 202 Accepted in 259ms (Views: 0.2ms | ActiveRecord: 10.6ms | Allocations: 8659)


Started POST "/auth/login" for ::1 at 2023-11-11 13:47:49 +0700
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"thai@gmail.com", "password"=>"[FILTERED]"}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms | Allocations: 357)


  
JWT::DecodeError (Nil JSON web token):
  
lib/authenticate_helper.rb:4:in `authenticate_user'
Started POST "/auth/login" for ::1 at 2023-11-11 13:50:02 +0700
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"thai@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/authentication_controller.rb:4:in `login'
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from encode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:7)
Completed 202 Accepted in 251ms (Views: 0.5ms | ActiveRecord: 6.6ms | Allocations: 6057)


Started POST "/api/v1/brands?brands[name]=KFC" for ::1 at 2023-11-11 13:50:40 +0700
Processing by Api::V1::BrandsController#create as */*
  Parameters: {"brand"=>{"name"=>"\"thaithai\""}, "brands"=>{"name"=>"KFC"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 741)


  
TypeError (can't cast Hash):
  
lib/authenticate_helper.rb:5:in `authenticate_user'
Started POST "/api/v1/brands?brands[name]=KFC" for ::1 at 2023-11-11 13:51:13 +0700
Processing by Api::V1::BrandsController#create as */*
  Parameters: {"brand"=>{"name"=>"\"thaithai\""}, "brands"=>{"name"=>"KFC"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
Completed 500 Internal Server Error in 78ms (ActiveRecord: 1.3ms | Allocations: 145807)


  
TypeError (can't cast Hash):
  
lib/authenticate_helper.rb:6:in `authenticate_user'
Started POST "/api/v1/brands?brands[name]=KFC" for ::1 at 2023-11-11 13:51:30 +0700
Processing by Api::V1::BrandsController#create as */*
  Parameters: {"brand"=>{"name"=>"\"thaithai\""}, "brands"=>{"name"=>"KFC"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
Completed 500 Internal Server Error in 32ms (ActiveRecord: 0.0ms | Allocations: 105827)


  
TypeError (can't cast Hash):
  
lib/authenticate_helper.rb:6:in `authenticate_user'
Started POST "/api/v1/brands?brands[name]=KFC" for ::1 at 2023-11-11 13:52:56 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::BrandsController#create as */*
  Parameters: {"brand"=>{"name"=>"\"thaithai\""}, "brands"=>{"name"=>"KFC"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
Completed 500 Internal Server Error in 42922ms (ActiveRecord: 0.0ms | Allocations: 183353)


  
SystemExit (exit):
  
(rdbg)//Users/thaiphuc/projects/product-backend/lib/authenticate_helper.rb:1:in `exit'
(rdbg)//Users/thaiphuc/projects/product-backend/lib/authenticate_helper.rb:1:in `authenticate_user'
lib/authenticate_helper.rb:3:in `authenticate_user'
Started POST "/api/v1/brands?brands[name]=KFC" for ::1 at 2023-11-11 13:53:52 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::BrandsController#create as */*
  Parameters: {"brand"=>{"name"=>"\"thaithai\""}, "brands"=>{"name"=>"KFC"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:6:in `authenticate_user'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/brands_controller.rb:22:in `create'
  [1m[36mBrand Create (2.8ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "\"thaithai\""], ["avatar", nil], ["short_name", nil], ["status", nil], ["store_number", nil], ["created_at", "2023-11-11 06:54:30.199826"], ["updated_at", "2023-11-11 06:54:30.199826"]]
  ↳ app/controllers/api/v1/brands_controller.rb:22:in `create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/brands_controller.rb:22:in `create'
Completed 500 Internal Server Error in 37263ms (ActiveRecord: 43.1ms | Allocations: 1812622)


  
NoMethodError (undefined method `brand_url' for #<Api::V1::BrandsController:0x0000000000b248>

              target.public_send(method, *args)
                    ^^^^^^^^^^^^):
  
app/controllers/api/v1/brands_controller.rb:23:in `create'
Started POST "/api/v1/brands?brands[name]=KFC" for ::1 at 2023-11-11 13:55:42 +0700
Processing by Api::V1::BrandsController#create as */*
  Parameters: {"brand"=>{"name"=>"\"thaithai\""}, "brands"=>{"name"=>"KFC"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:6:in `authenticate_user'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/brands_controller.rb:22:in `create'
  [1m[36mBrand Create (1.3ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "\"thaithai\""], ["avatar", nil], ["short_name", nil], ["status", nil], ["store_number", nil], ["created_at", "2023-11-11 06:55:46.378722"], ["updated_at", "2023-11-11 06:55:46.378722"]]
  ↳ app/controllers/api/v1/brands_controller.rb:22:in `create'
  [1m[36mTRANSACTION (12.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/brands_controller.rb:22:in `create'
Completed 500 Internal Server Error in 3860ms (ActiveRecord: 14.7ms | Allocations: 115806)


  
NoMethodError (undefined method `brand_url' for #<Api::V1::BrandsController:0x0000000000db10>

              target.public_send(method, *args)
                    ^^^^^^^^^^^^):
  
app/controllers/api/v1/brands_controller.rb:23:in `create'
Started POST "/api/v1/brands?brands[name]=KFC" for ::1 at 2023-11-11 13:56:41 +0700
Processing by Api::V1::BrandsController#create as */*
  Parameters: {"brand"=>{"name"=>"\"thaithai\""}, "brands"=>{"name"=>"KFC"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:6:in `authenticate_user'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/brands_controller.rb:22:in `create'
  [1m[36mBrand Create (1.6ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "\"thaithai\""], ["avatar", nil], ["short_name", nil], ["status", nil], ["store_number", nil], ["created_at", "2023-11-11 06:56:45.492607"], ["updated_at", "2023-11-11 06:56:45.492607"]]
  ↳ app/controllers/api/v1/brands_controller.rb:22:in `create'
  [1m[36mTRANSACTION (7.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/brands_controller.rb:22:in `create'
Completed 201 Created in 3588ms (Views: 0.5ms | ActiveRecord: 30.3ms | Allocations: 121224)


Started POST "/api/v1/brands?brands[name]=KFCjj" for ::1 at 2023-11-11 14:00:36 +0700
Processing by Api::V1::BrandsController#create as */*
  Parameters: {"brand"=>{"name"=>"\"thaithai\""}, "brands"=>{"name"=>"KFCjj"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:6:in `authenticate_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/brands_controller.rb:22:in `create'
  [1m[36mBrand Create (7.5ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "\"thaithai\""], ["avatar", nil], ["short_name", nil], ["status", nil], ["store_number", nil], ["created_at", "2023-11-11 07:00:45.844653"], ["updated_at", "2023-11-11 07:00:45.844653"]]
  ↳ app/controllers/api/v1/brands_controller.rb:22:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/brands_controller.rb:22:in `create'
Completed 500 Internal Server Error in 9187ms (ActiveRecord: 21.6ms | Allocations: 124060)


  
NoMethodError (undefined method `brand_url' for #<Api::V1::BrandsController:0x00000000019370>

              target.public_send(method, *args)
                    ^^^^^^^^^^^^):
  
app/controllers/api/v1/brands_controller.rb:23:in `create'
Started POST "/api/v1/brands?brands[name]=KFCjj" for ::1 at 2023-11-11 14:01:00 +0700
Processing by Api::V1::BrandsController#create as */*
  Parameters: {"brand"=>{"name"=>"\"thaithai\""}, "brands"=>{"name"=>"KFCjj"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:6:in `authenticate_user'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/brands_controller.rb:22:in `create'
  [1m[36mBrand Create (2.2ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "\"thaithai\""], ["avatar", nil], ["short_name", nil], ["status", nil], ["store_number", nil], ["created_at", "2023-11-11 07:01:06.874709"], ["updated_at", "2023-11-11 07:01:06.874709"]]
  ↳ app/controllers/api/v1/brands_controller.rb:22:in `create'
  [1m[36mTRANSACTION (7.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/brands_controller.rb:22:in `create'
Completed 201 Created in 5794ms (Views: 0.4ms | ActiveRecord: 33.2ms | Allocations: 118728)


Started POST "/api/v1/brands?brand[name]=KFCjj" for ::1 at 2023-11-11 14:01:49 +0700
Processing by Api::V1::BrandsController#create as */*
  Parameters: {"brand"=>{"name"=>"KFCjj"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:6:in `authenticate_user'
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/brands_controller.rb:22:in `create'
  [1m[36mBrand Create (4.5ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "KFCjj"], ["avatar", nil], ["short_name", nil], ["status", nil], ["store_number", nil], ["created_at", "2023-11-11 07:01:52.794691"], ["updated_at", "2023-11-11 07:01:52.794691"]]
  ↳ app/controllers/api/v1/brands_controller.rb:22:in `create'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/brands_controller.rb:22:in `create'
Completed 201 Created in 3315ms (Views: 0.2ms | ActiveRecord: 9.6ms | Allocations: 109787)


Started GET "/api/v1/brands/5" for ::1 at 2023-11-11 14:03:14 +0700
Processing by Api::V1::BrandsController#show as */*
  Parameters: {"id"=>"5"}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:6:in `authenticate_user'
  [1m[36mBrand Load (0.7ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/brands_controller.rb:47:in `set_brand'
Completed 200 OK in 2687ms (Views: 0.4ms | ActiveRecord: 1.4ms | Allocations: 108322)


Started GET "/api/v1/brands/6" for ::1 at 2023-11-11 14:04:48 +0700
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::BrandsController#show as */*
  Parameters: {"id"=>"6"}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mBrand Load (0.4ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/brands_controller.rb:47:in `set_brand'
Completed 200 OK in 43ms (Views: 0.3ms | ActiveRecord: 13.6ms | Allocations: 31157)


Started GET "/api/v1/brands/1" for ::1 at 2023-11-11 14:04:57 +0700
Processing by Api::V1::BrandsController#show as */*
  Parameters: {"id"=>"1"}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mBrand Load (0.2ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/brands_controller.rb:47:in `set_brand'
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.7ms | Allocations: 1548)


Started GET "/api/v1/brands/2" for ::1 at 2023-11-11 14:05:01 +0700
Processing by Api::V1::BrandsController#show as */*
  Parameters: {"id"=>"2"}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mBrand Load (0.2ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/brands_controller.rb:47:in `set_brand'
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 1404)


Started GET "/api/v1/brands/3" for ::1 at 2023-11-11 14:05:03 +0700
Processing by Api::V1::BrandsController#show as */*
  Parameters: {"id"=>"3"}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mBrand Load (0.2ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/brands_controller.rb:47:in `set_brand'
Completed 200 OK in 5ms (Views: 0.5ms | ActiveRecord: 0.6ms | Allocations: 1404)


Started GET "/api/v1/brands/4" for ::1 at 2023-11-11 14:05:05 +0700
Processing by Api::V1::BrandsController#show as */*
  Parameters: {"id"=>"4"}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mBrand Load (0.2ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/brands_controller.rb:47:in `set_brand'
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 1.4ms | Allocations: 1404)


Started GET "/api/v1/brands/5" for ::1 at 2023-11-11 14:05:07 +0700
Processing by Api::V1::BrandsController#show as */*
  Parameters: {"id"=>"5"}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mBrand Load (0.3ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/brands_controller.rb:47:in `set_brand'
Completed 200 OK in 20ms (Views: 5.8ms | ActiveRecord: 1.7ms | Allocations: 1386)


Started GET "/api/v1/brands/6" for ::1 at 2023-11-11 14:05:09 +0700
Processing by Api::V1::BrandsController#show as */*
  Parameters: {"id"=>"6"}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mBrand Load (0.1ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/brands_controller.rb:47:in `set_brand'
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 1387)


  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mBrand Load (0.9ms)[0m  [1m[34mSELECT "brands".* FROM "brands"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Destroy (3.7ms)[0m  [1m[31mDELETE FROM "brands" WHERE "brands"."id" = $1[0m  [["id", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Destroy (0.8ms)[0m  [1m[31mDELETE FROM "brands" WHERE "brands"."id" = $1[0m  [["id", 2]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Destroy (0.8ms)[0m  [1m[31mDELETE FROM "brands" WHERE "brands"."id" = $1[0m  [["id", 3]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Destroy (0.7ms)[0m  [1m[31mDELETE FROM "brands" WHERE "brands"."id" = $1[0m  [["id", 4]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Destroy (0.7ms)[0m  [1m[31mDELETE FROM "brands" WHERE "brands"."id" = $1[0m  [["id", 5]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Destroy (0.7ms)[0m  [1m[31mDELETE FROM "brands" WHERE "brands"."id" = $1[0m  [["id", 6]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.8ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "KFC"], ["avatar", "https://www.gravatar.com/avatar/7?s=64&d=identicon&r=PG"], ["short_name", "KFC"], ["status", true], ["store_number", 12], ["created_at", "2023-11-11 07:05:24.113685"], ["updated_at", "2023-11-11 07:05:24.113685"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.7ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "the coffee house"], ["avatar", "https://www.gravatar.com/avatar/5?s=64&d=identicon&r=PG"], ["short_name", "TCH"], ["status", true], ["store_number", 232], ["created_at", "2023-11-11 07:05:24.115714"], ["updated_at", "2023-11-11 07:05:24.115714"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.7ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "circle K"], ["avatar", "https://www.gravatar.com/avatar/7?s=64&d=identicon&r=PG"], ["short_name", "CRK"], ["status", true], ["store_number", 156], ["created_at", "2023-11-11 07:05:24.117308"], ["updated_at", "2023-11-11 07:05:24.117308"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mBrand Count (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "brands"[0m
Started GET "/api/v1/brands/1" for ::1 at 2023-11-11 14:05:29 +0700
Processing by Api::V1::BrandsController#show as */*
  Parameters: {"id"=>"1"}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mBrand Load (0.1ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/brands_controller.rb:47:in `set_brand'
Completed 404 Not Found in 1ms (ActiveRecord: 0.3ms | Allocations: 1381)


  
ActiveRecord::RecordNotFound (Couldn't find Brand with 'id'=1):
  
app/controllers/api/v1/brands_controller.rb:47:in `set_brand'
  [1m[36mBrand Load (0.9ms)[0m  [1m[34mSELECT "brands".* FROM "brands" /* loading for pp */ LIMIT $1[0m  [["LIMIT", 11]]
Started GET "/api/v1/brands/7" for ::1 at 2023-11-11 14:06:05 +0700
Processing by Api::V1::BrandsController#show as */*
  Parameters: {"id"=>"7"}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mBrand Load (0.1ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/brands_controller.rb:47:in `set_brand'
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.4ms | Allocations: 1401)


Started GET "/me" for ::1 at 2023-11-11 15:14:28 +0700
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RegistrationsController#me as */*
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
Completed 200 OK in 28ms (Views: 0.3ms | ActiveRecord: 9.4ms | Allocations: 23567)


Started POST "/api/v1/products" for ::1 at 2023-11-11 15:17:52 +0700
Processing by Api::V1::ProductsController#create as */*
  Parameters: {"product"=>{"name"=>"\"thaithai\"", "brand_id"=>"6", "price"=>"123.5"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/products_controller.rb:22:in `create'
  [1m[36mBrand Load (0.5ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:22:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/products_controller.rb:22:in `create'
Completed 422 Unprocessable Entity in 36ms (Views: 2.0ms | ActiveRecord: 15.6ms | Allocations: 22651)


Started POST "/api/v1/products" for ::1 at 2023-11-11 15:18:28 +0700
Processing by Api::V1::ProductsController#create as */*
  Parameters: {"product"=>{"name"=>"\"thaithai\"", "brand_id"=>"6", "price"=>"123.5"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mBrand Load (0.4ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/products_controller.rb:1:in `create'
Completed 422 Unprocessable Entity in 55509ms (Views: 0.9ms | ActiveRecord: 23.3ms | Allocations: 182941)


Started POST "/api/v1/products" for ::1 at 2023-11-11 15:19:28 +0700
Processing by Api::V1::ProductsController#create as */*
  Parameters: {"product"=>{"name"=>"\"thaithai\"", "brand_id"=>"7", "price"=>"123.5"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mBrand Load (1.1ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/products_controller.rb:1:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/products_controller.rb:22:in `create'
  [1m[36mProduct Create (7.9ms)[0m  [1m[32mINSERT INTO "products" ("name", "avatar", "sku", "status", "price", "brand_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "\"thaithai\""], ["avatar", nil], ["sku", nil], ["status", nil], ["price", "123.5"], ["brand_id", 7], ["created_at", "2023-11-11 08:19:34.319257"], ["updated_at", "2023-11-11 08:19:34.319257"]]
  ↳ app/controllers/api/v1/products_controller.rb:22:in `create'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:22:in `create'
Completed 201 Created in 6022ms (Views: 0.6ms | ActiveRecord: 11.0ms | Allocations: 126412)


Started POST "/api/v1/products" for ::1 at 2023-11-11 15:20:06 +0700
Processing by Api::V1::ProductsController#create as */*
  Parameters: {"product"=>{"name"=>"ca fe", "brand_id"=>"7", "price"=>"123.5"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/products_controller.rb:22:in `create'
  [1m[36mBrand Load (4.6ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:22:in `create'
  [1m[36mProduct Create (1.7ms)[0m  [1m[32mINSERT INTO "products" ("name", "avatar", "sku", "status", "price", "brand_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "ca fe"], ["avatar", nil], ["sku", nil], ["status", nil], ["price", "123.5"], ["brand_id", 7], ["created_at", "2023-11-11 08:20:09.256837"], ["updated_at", "2023-11-11 08:20:09.256837"]]
  ↳ app/controllers/api/v1/products_controller.rb:22:in `create'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/products_controller.rb:22:in `create'
Completed 201 Created in 2323ms (Views: 0.5ms | ActiveRecord: 8.9ms | Allocations: 115293)


Started GET "/brands" for ::1 at 2023-11-11 15:20:28 +0700
  
ActionController::RoutingError (No route matches [GET] "/brands"):
  
Started GET "/api/v1/brands" for ::1 at 2023-11-11 15:21:29 +0700
Processing by Api::V1::BrandsController#index as */*
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mBrand Load (0.2ms)[0m  [1m[34mSELECT "brands".* FROM "brands"[0m
  ↳ app/controllers/api/v1/brands_controller.rb:10:in `index'
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.7ms | Allocations: 2048)


Started GET "/api/v1/products" for ::1 at 2023-11-11 15:21:36 +0700
Processing by Api::V1::ProductsController#index as */*
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mProduct Load (1.6ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:10:in `index'
Completed 200 OK in 7ms (Views: 2.3ms | ActiveRecord: 2.2ms | Allocations: 1758)


Started GET "/api/v1/brands/product" for ::1 at 2023-11-11 15:22:16 +0700
Processing by Api::V1::BrandsController#show as */*
  Parameters: {"id"=>"product"}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mBrand Load (0.2ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/brands_controller.rb:47:in `set_brand'
Completed 404 Not Found in 4ms (ActiveRecord: 0.5ms | Allocations: 1552)


  
ActiveRecord::RecordNotFound (Couldn't find Brand with 'id'=product):
  
app/controllers/api/v1/brands_controller.rb:47:in `set_brand'
  [1m[36mBrand Load (0.6ms)[0m  [1m[34mSELECT "brands".* FROM "brands" /* loading for pp */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mBrand Load (0.5ms)[0m  [1m[34mSELECT "brands".* FROM "brands" ORDER BY "brands"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBrand Load (1.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" ORDER BY "brands"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBrand Load (0.8ms)[0m  [1m[34mSELECT "brands".* FROM "brands" ORDER BY "brands"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/api/v1/brands/" for ::1 at 2023-11-11 15:26:18 +0700
Processing by Api::V1::BrandsController#index as */*
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mBrand Load (0.2ms)[0m  [1m[34mSELECT "brands".* FROM "brands"[0m
  ↳ app/controllers/api/v1/brands_controller.rb:10:in `index'
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.5ms | Allocations: 1631)


  [1m[36mBrand Load (0.5ms)[0m  [1m[34mSELECT "brands".* FROM "brands" ORDER BY "brands"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mBrand Load (2.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" ORDER BY "brands"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."brand_id" = $1 /* loading for pp */ LIMIT $2[0m  [["brand_id", 7], ["LIMIT", 11]]
Started GET "/api/v1/brands/7/products" for ::1 at 2023-11-11 15:27:21 +0700
  
ActionController::RoutingError (No route matches [GET] "/api/v1/brands/7/products"):
  
Started GET "/api/v1/brands/7/products" for ::1 at 2023-11-11 15:35:06 +0700
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [GET] "/api/v1/brands/7/products"):
  
Started GET "/api/v1/brands/7/products" for ::1 at 2023-11-11 15:35:32 +0700
  [1m[36mActiveRecord::SchemaMigration Load (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [GET] "/api/v1/brands/7/products"):
  
Started GET "/api/v1/brands/7/products" for ::1 at 2023-11-11 15:35:50 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::BrandsController#product_brand as */*
  Parameters: {"id"=>"7"}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
Completed 200 OK in 38ms (Views: 0.1ms | ActiveRecord: 20.2ms | Allocations: 23350)


Started GET "/api/v1/brands/7" for ::1 at 2023-11-11 15:36:41 +0700
Processing by Api::V1::BrandsController#show as */*
  Parameters: {"id"=>"7"}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mBrand Load (0.3ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/brands_controller.rb:50:in `set_brand'
Completed 200 OK in 25ms (Views: 0.3ms | ActiveRecord: 3.5ms | Allocations: 10955)


Started GET "/api/v1/brands/7/products" for ::1 at 2023-11-11 15:38:32 +0700
Processing by Api::V1::BrandsController#product_brand as */*
  Parameters: {"id"=>"7"}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mBrand Load (0.2ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/brands_controller.rb:52:in `set_brand'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."brand_id" = $1[0m  [["brand_id", 7]]
  ↳ app/controllers/api/v1/brands_controller.rb:20:in `product_brand'
Completed 200 OK in 29ms (Views: 6.0ms | ActiveRecord: 13.2ms | Allocations: 21778)


  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (6.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "role", "status", "password_digest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "admin@test.com"], ["name", "Admin"], ["role", "Admin"], ["status", true], ["password_digest", "[FILTERED]"], ["created_at", "2023-11-11 08:42:25.526410"], ["updated_at", "2023-11-11 08:42:25.526410"]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
Started GET "/me" for ::1 at 2023-11-11 15:45:56 +0700
  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RegistrationsController#me as */*
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 5647)


Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 16:15:11 +0700
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate

You have 1 pending migration:

db/migrate/20231111090119_create_card_requests.rb


):
  
activerecord (7.1.1) lib/active_record/migration.rb:753:in `check_pending_migrations'
activerecord (7.1.1) lib/active_record/migration.rb:642:in `block (2 levels) in call'
activesupport (7.1.1) lib/active_support/file_update_checker.rb:85:in `execute'
activerecord (7.1.1) lib/active_record/migration.rb:647:in `block in call'
activerecord (7.1.1) lib/active_record/migration.rb:639:in `synchronize'
activerecord (7.1.1) lib/active_record/migration.rb:639:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (7.1.1) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.1.1) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/actionable_exceptions.rb:16:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (7.1.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (7.1.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (7.1.1) lib/active_support/tagged_logging.rb:135:in `block in tagged'
activesupport (7.1.1) lib/active_support/tagged_logging.rb:39:in `tagged'
activesupport (7.1.1) lib/active_support/tagged_logging.rb:135:in `tagged'
activesupport (7.1.1) lib/active_support/broadcast_logger.rb:232:in `method_missing'
railties (7.1.1) lib/rails/rack/logger.rb:24:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/remote_ip.rb:92:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/request_id.rb:28:in `call'
rack (3.0.8) lib/rack/runtime.rb:24:in `call'
activesupport (7.1.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/server_timing.rb:59:in `block in call'
actionpack (7.1.1) lib/action_dispatch/middleware/server_timing.rb:24:in `collect_events'
actionpack (7.1.1) lib/action_dispatch/middleware/server_timing.rb:58:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.8) lib/rack/sendfile.rb:114:in `call'
actionpack (7.1.1) lib/action_dispatch/middleware/host_authorization.rb:141:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (7.1.1) lib/rails/engine.rb:529:in `call'
puma (6.4.0) lib/puma/configuration.rb:272:in `call'
puma (6.4.0) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.0) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.0) lib/puma/request.rb:99:in `handle_request'
puma (6.4.0) lib/puma/server.rb:443:in `process_client'
puma (6.4.0) lib/puma/server.rb:241:in `block in run'
puma (6.4.0) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" /* loading for pp */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mProduct Load (1.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  [1m[36mProduct Load (2.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  [1m[36mCard Load (6.2ms)[0m  [1m[34mSELECT "cards".* FROM "cards" /* loading for pp */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCard Count (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "cards"[0m
  [1m[36mCard Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "cards"[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCard Create (2.7ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "thai"], ["price", "12.0"], ["pin", nil], ["status", nil], ["user_id", 3], ["created_at", "2023-11-11 10:45:09.001939"], ["updated_at", "2023-11-11 10:45:09.001939"]]
  [1m[36mCardProduct Create (3.0ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 1], ["product_id", 1], ["created_at", "2023-11-11 10:45:09.005564"], ["updated_at", "2023-11-11 10:45:09.005564"]]
  [1m[36mCardProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 1], ["product_id", 2], ["created_at", "2023-11-11 10:45:09.009057"], ["updated_at", "2023-11-11 10:45:09.009057"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" /* loading for pp */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCard Load (1.0ms)[0m  [1m[34mSELECT "cards".* FROM "cards" /* loading for pp */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCard Load (0.6ms)[0m  [1m[34mSELECT "cards".* FROM "cards" ORDER BY "cards"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (1.8ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "card_products" ON "products"."id" = "card_products"."product_id" WHERE "card_products"."card_id" = $1 /* loading for pp */ LIMIT $2[0m  [["card_id", 1], ["LIMIT", 11]]
  [1m[36mCard Load (1.0ms)[0m  [1m[34mSELECT "cards".* FROM "cards" ORDER BY "cards"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCardProduct Load (0.3ms)[0m  [1m[34mSELECT "card_products".* FROM "card_products" WHERE "card_products"."card_id" = $1 /* loading for pp */ LIMIT $2[0m  [["card_id", 1], ["LIMIT", 11]]
Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 20:39:21 +0700
  [1m[36mActiveRecord::SchemaMigration Load (2.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"name"=>"black", "type"=>"vip", "product_ids"=>"[1, 2]"}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
Completed 400 Bad Request in 72ms (ActiveRecord: 24.5ms | Allocations: 27149)


  
ActionController::ParameterMissing (param is missing or the value is empty: card):
  
app/controllers/api/v1/cards_controller.rb:60:in `card_params'
app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 20:40:01 +0700
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "type"=>"vip", "product_ids"=>"[1, 2]"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
[31mUnpermitted parameters: :type, :product_ids. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x000000010aa5e730>, params: {"card"=>{"name"=>"black", "type"=>"vip", "product_ids"=>"[1, 2]"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCard Create (1.5ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "black"], ["price", nil], ["pin", nil], ["status", nil], ["user_id", 1], ["created_at", "2023-11-11 13:40:01.653116"], ["updated_at", "2023-11-11 13:40:01.653116"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
Completed 202 Accepted in 48ms (Views: 0.4ms | ActiveRecord: 9.9ms | Allocations: 23786)


Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 20:45:35 +0700
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "type"=>"vip", "product_ids"=>"[1, 2]"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
[31mUnpermitted parameters: :type, :product_ids. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x000000010b0dc058>, params: {"card"=>{"name"=>"black", "type"=>"vip", "product_ids"=>"[1, 2]"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
[31mUnpermitted parameters: :type, :product_ids. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x000000010b0dc058>, params: {"card"=>{"name"=>"black", "type"=>"vip", "product_ids"=>"[1, 2]"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
  [1m[36mTRANSACTION (6.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCard Create (113.1ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "black"], ["price", nil], ["pin", nil], ["status", nil], ["user_id", 1], ["created_at", "2023-11-11 13:46:54.768651"], ["updated_at", "2023-11-11 13:46:54.768651"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mTRANSACTION (7.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
Completed 202 Accepted in 187442ms (Views: 0.7ms | ActiveRecord: 128.5ms | Allocations: 6683144)


Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 20:49:50 +0700
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
[31mUnpermitted parameter: :product_ids. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x000000010a9acff8>, params: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/cards_controller.rb:21:in `request_new_card'
  [1m[36mCard Create (1.0ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "black"], ["price", "0.0"], ["pin", "123456"], ["status", nil], ["user_id", 1], ["created_at", "2023-11-11 13:49:51.142909"], ["updated_at", "2023-11-11 13:49:51.142909"]]
  ↳ app/controllers/api/v1/cards_controller.rb:21:in `request_new_card'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/cards_controller.rb:21:in `request_new_card'
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" /* loading for pp */ LIMIT $1[0m  [["LIMIT", 11]]
  ↳ app/controllers/api/v1/cards_controller.rb:23:in `request_new_card'
  [1m[36mProduct Load (1.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mTRANSACTION (5.1ms)[0m  [1m[35mBEGIN[0m
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mCard Create (7.0ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "thai"], ["price", "12.0"], ["pin", nil], ["status", nil], ["user_id", 1], ["created_at", "2023-11-11 13:52:51.005243"], ["updated_at", "2023-11-11 13:52:51.005243"]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mCardProduct Create (1.4ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 5], ["product_id", 1], ["created_at", "2023-11-11 13:52:51.013816"], ["updated_at", "2023-11-11 13:52:51.013816"]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mCardProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 5], ["product_id", 2], ["created_at", "2023-11-11 13:52:51.016568"], ["updated_at", "2023-11-11 13:52:51.016568"]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mCard Load (0.4ms)[0m  [1m[34mSELECT "cards".* FROM "cards" WHERE "cards"."user_id" = $1 /* loading for pp */ LIMIT $2[0m  [["user_id", 1], ["LIMIT", 11]]
  ↳ app/controllers/api/v1/cards_controller.rb:23:in `request_new_card'
  [1m[36mProduct Load (1.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mCard Create (0.3ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "thaitest"], ["price", "12.22"], ["pin", nil], ["status", nil], ["user_id", 1], ["created_at", "2023-11-11 13:55:23.648916"], ["updated_at", "2023-11-11 13:55:23.648916"]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mCardProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 6], ["product_id", 1], ["created_at", "2023-11-11 13:55:23.649976"], ["updated_at", "2023-11-11 13:55:23.649976"]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mCardProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 6], ["product_id", 2], ["created_at", "2023-11-11 13:55:23.650945"], ["updated_at", "2023-11-11 13:55:23.650945"]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mProduct Load (3.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mCard Create (0.4ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "thaitest"], ["price", "12.22"], ["pin", nil], ["status", nil], ["user_id", 3], ["created_at", "2023-11-11 13:56:38.117858"], ["updated_at", "2023-11-11 13:56:38.117858"]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mCardProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 7], ["product_id", 1], ["created_at", "2023-11-11 13:56:38.119365"], ["updated_at", "2023-11-11 13:56:38.119365"]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mCardProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 7], ["product_id", 2], ["created_at", "2023-11-11 13:56:38.120737"], ["updated_at", "2023-11-11 13:56:38.120737"]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCard Create (5.4ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "thai"], ["price", "12.0"], ["pin", nil], ["status", nil], ["user_id", 3], ["created_at", "2023-11-11 13:57:22.974798"], ["updated_at", "2023-11-11 13:57:22.974798"]]
  [1m[36mCardProduct Create (1.0ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 8], ["product_id", 1], ["created_at", "2023-11-11 13:57:22.981091"], ["updated_at", "2023-11-11 13:57:22.981091"]]
  [1m[36mCardProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 8], ["product_id", 2], ["created_at", "2023-11-11 13:57:22.982478"], ["updated_at", "2023-11-11 13:57:22.982478"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCardProduct Load (1.4ms)[0m  [1m[34mSELECT "card_products".* FROM "card_products" /* loading for pp */ LIMIT $1[0m  [["LIMIT", 11]]
Completed 500 Internal Server Error in 615523ms (ActiveRecord: 59.3ms | Allocations: 481557)


  
SystemExit (exit):
  
(rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `exit'
(rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
app/controllers/api/v1/cards_controller.rb:23:in `request_new_card'
Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:00:16 +0700
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
[31mUnpermitted parameter: :product_ids. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x000000010af6f828>, params: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/cards_controller.rb:21:in `request_new_card'
  [1m[36mCard Create (1.9ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "black"], ["price", "0.0"], ["pin", "123456"], ["status", nil], ["user_id", 1], ["created_at", "2023-11-11 14:00:16.245868"], ["updated_at", "2023-11-11 14:00:16.245868"]]
  ↳ app/controllers/api/v1/cards_controller.rb:21:in `request_new_card'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/cards_controller.rb:21:in `request_new_card'
  [1m[36mProduct Load (1.9ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "card_products" ON "products"."id" = "card_products"."product_id" WHERE "card_products"."card_id" = $1[0m  [["card_id", 9]]
  ↳ app/controllers/api/v1/cards_controller.rb:23:in `request_new_card'
Completed 202 Accepted in 60ms (Views: 2.1ms | ActiveRecord: 22.9ms | Allocations: 50211)


Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:00:41 +0700
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
[31mUnpermitted parameter: :product_ids. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x000000010a9c4478>, params: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/cards_controller.rb:21:in `request_new_card'
  [1m[36mCard Create (0.8ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "black"], ["price", "0.0"], ["pin", "123456"], ["status", nil], ["user_id", 1], ["created_at", "2023-11-11 14:00:41.256346"], ["updated_at", "2023-11-11 14:00:41.256346"]]
  ↳ app/controllers/api/v1/cards_controller.rb:21:in `request_new_card'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/cards_controller.rb:21:in `request_new_card'
  [1m[36mProduct Load (4.5ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "card_products" ON "products"."id" = "card_products"."product_id" WHERE "card_products"."card_id" = $1[0m  [["card_id", 10]]
  ↳ app/controllers/api/v1/cards_controller.rb:23:in `request_new_card'
[31mUnpermitted parameter: :product_ids. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x000000010a9c4478>, params: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mCard Create (0.7ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "black"], ["price", "0.0"], ["pin", "123456"], ["status", nil], ["user_id", 1], ["created_at", "2023-11-11 14:02:03.971007"], ["updated_at", "2023-11-11 14:02:03.971007"]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "card_products" ON "products"."id" = "card_products"."product_id" WHERE "card_products"."card_id" = $1 /* loading for pp */ LIMIT $2[0m  [["card_id", 11], ["LIMIT", 11]]
  ↳ app/controllers/api/v1/cards_controller.rb:23:in `request_new_card'
  [1m[36mProduct Load (1.8ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "card_products" ON "products"."id" = "card_products"."product_id" WHERE "card_products"."card_id" = $1[0m  [["card_id", 11]]
  ↳ app/controllers/api/v1/cards_controller.rb:23:in `request_new_card'
  [1m[36mCardProduct Load (0.5ms)[0m  [1m[34mSELECT "card_products".* FROM "card_products" /* loading for pp */ LIMIT $1[0m  [["LIMIT", 11]]
  ↳ app/controllers/api/v1/cards_controller.rb:23:in `request_new_card'
  [1m[36mCard Load (0.9ms)[0m  [1m[34mSELECT "cards".* FROM "cards" /* loading for pp */ LIMIT $1[0m  [["LIMIT", 11]]
  ↳ app/controllers/api/v1/cards_controller.rb:23:in `request_new_card'
  [1m[36mProduct Load (4.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mCard Create (1.3ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "thai"], ["price", "12.0"], ["pin", nil], ["status", nil], ["user_id", 3], ["created_at", "2023-11-11 14:05:04.410340"], ["updated_at", "2023-11-11 14:05:04.410340"]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mCardProduct Create (2.1ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 12], ["product_id", 1], ["created_at", "2023-11-11 14:05:04.413270"], ["updated_at", "2023-11-11 14:05:04.413270"]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mCardProduct Create (1.9ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 12], ["product_id", 2], ["created_at", "2023-11-11 14:05:04.416435"], ["updated_at", "2023-11-11 14:05:04.416435"]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
Completed 500 Internal Server Error in 263283ms (ActiveRecord: 38.7ms | Allocations: 438272)


  
NoMethodError (undefined method `width' for nil:NilClass

      @ui.width
         ^^^^^^):
  
app/controllers/api/v1/cards_controller.rb:23:in `request_new_card'
Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:05:14 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
[31mUnpermitted parameter: :product_ids. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x00000001089d5018>, params: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/cards_controller.rb:21:in `request_new_card'
  [1m[36mCard Create (1.7ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "black"], ["price", "0.0"], ["pin", "123456"], ["status", nil], ["user_id", 1], ["created_at", "2023-11-11 14:05:15.087932"], ["updated_at", "2023-11-11 14:05:15.087932"]]
  ↳ app/controllers/api/v1/cards_controller.rb:21:in `request_new_card'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/cards_controller.rb:21:in `request_new_card'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mProduct Load (5.8ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "card_products" ON "products"."id" = "card_products"."product_id" WHERE "card_products"."card_id" = $1[0m  [["card_id", 13]]
  ↳ app/controllers/api/v1/cards_controller.rb:24:in `request_new_card'
Completed 202 Accepted in 179425ms (Views: 20.1ms | ActiveRecord: 29.8ms | Allocations: 290068)


Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:09:11 +0700
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
[31mUnpermitted parameter: :product_ids. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x000000010a9fd9a8>, params: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/cards_controller.rb:21:in `request_new_card'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/cards_controller.rb:21:in `request_new_card'
  [1m[36mCard Create (0.4ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "black"], ["price", "0.0"], ["pin", "123456"], ["status", nil], ["user_id", 1], ["created_at", "2023-11-11 14:09:11.754890"], ["updated_at", "2023-11-11 14:09:11.754890"]]
  ↳ app/controllers/api/v1/cards_controller.rb:21:in `request_new_card'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/cards_controller.rb:21:in `request_new_card'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" /* loading for pp */ LIMIT $1[0m  [["LIMIT", 11]]
  ↳ app/controllers/api/v1/cards_controller.rb:23:in `request_new_card'
Completed 500 Internal Server Error in 81405ms (ActiveRecord: 17.9ms | Allocations: 181212)


  
SystemExit (exit):
  
(rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `exit'
(rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
app/controllers/api/v1/cards_controller.rb:23:in `request_new_card'
Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:10:39 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
[31mUnpermitted parameters: :product_ids, :price. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x0000000108c0c048>, params: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/cards_controller.rb:21:in `request_new_card'
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/cards_controller.rb:21:in `request_new_card'
  [1m[36mCard Create (0.9ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "black"], ["price", nil], ["pin", "123456"], ["status", nil], ["user_id", 1], ["created_at", "2023-11-11 14:10:39.236962"], ["updated_at", "2023-11-11 14:10:39.236962"]]
  ↳ app/controllers/api/v1/cards_controller.rb:21:in `request_new_card'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/cards_controller.rb:21:in `request_new_card'
[31mUnpermitted parameters: :product_ids, :price. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x0000000108c0c048>, params: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
[31mUnpermitted parameters: :product_ids, :price. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x0000000108c0c048>, params: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
[31mUnpermitted parameter: :product_ids. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x0000000108c0c048>, params: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
Completed 500 Internal Server Error in 165508ms (ActiveRecord: 33.7ms | Allocations: 291359)


  
SystemExit (exit):
  
(rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `exit'
(rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
app/controllers/api/v1/cards_controller.rb:23:in `request_new_card'
Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:13:28 +0700
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1[0m  [["id", 0]]
  ↳ app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
Completed 404 Not Found in 25ms (ActiveRecord: 13.2ms | Allocations: 15610)


  
ActiveRecord::RecordNotFound (Couldn't find Product with 'id'=[0]):
  
app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:13:47 +0700
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1[0m  [["id", 0]]
  ↳ app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
Completed 404 Not Found in 71ms (ActiveRecord: 18.2ms | Allocations: 37780)


  
ActiveRecord::RecordNotFound (Couldn't find Product with 'id'=[0]):
  
app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:14:44 +0700
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
[31mUnpermitted parameter: :product_ids. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x0000000106557bf0>, params: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/cards_controller.rb:21:in `request_new_card'
  [1m[36mCard Create (1.9ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "black"], ["price", "0.0"], ["pin", "123456"], ["status", nil], ["user_id", 1], ["created_at", "2023-11-11 14:14:44.870211"], ["updated_at", "2023-11-11 14:14:44.870211"]]
  ↳ app/controllers/api/v1/cards_controller.rb:21:in `request_new_card'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/cards_controller.rb:21:in `request_new_card'
Completed 500 Internal Server Error in 31597ms (ActiveRecord: 23.6ms | Allocations: 203088)


  
SystemExit (exit):
  
(rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `exit'
(rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
app/controllers/api/v1/cards_controller.rb:23:in `request_new_card'
Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:15:19 +0700
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1[0m  [["id", 0]]
  ↳ app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
Completed 404 Not Found in 22ms (ActiveRecord: 12.0ms | Allocations: 15719)


  
ActiveRecord::RecordNotFound (Couldn't find Product with 'id'=[0]):
  
app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:16:15 +0700
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1[0m  [["id", 0]]
  ↳ app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
Completed 404 Not Found in 24ms (ActiveRecord: 11.0ms | Allocations: 15644)


  
ActiveRecord::RecordNotFound (Couldn't find Product with 'id'=[0]):
  
app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:16:21 +0700
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1[0m  [["id", 0]]
  ↳ app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
Completed 404 Not Found in 10068ms (ActiveRecord: 17.5ms | Allocations: 208491)


  
ActiveRecord::RecordNotFound (Couldn't find Product with 'id'=[0]):
  
app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:17:41 +0700
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
[31mUnpermitted parameter: :product_ids. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x000000010f91eca8>, params: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
[31mUnpermitted parameter: :product_ids. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x000000010f91eca8>, params: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
Completed 500 Internal Server Error in 164107ms (ActiveRecord: 6.3ms | Allocations: 188206)


  
SystemExit (exit):
  
(rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `exit'
(rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `card_request_params'
app/controllers/api/v1/cards_controller.rb:51:in `card_request_params'
app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:20:57 +0700
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1[0m  [["id", 0]]
  ↳ app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
Completed 404 Not Found in 28ms (ActiveRecord: 16.8ms | Allocations: 15734)


  
ActiveRecord::RecordNotFound (Couldn't find Product with 'id'=[0]):
  
app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:21:23 +0700
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
[31mUnpermitted parameter: :product_ids. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x000000010f9570a8>, params: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCard Create (2.2ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "black"], ["price", "0.0"], ["pin", "123456"], ["status", nil], ["user_id", 1], ["created_at", "2023-11-11 14:21:23.305542"], ["updated_at", "2023-11-11 14:21:23.305542"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mProduct Load (1.8ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "card_products" ON "products"."id" = "card_products"."product_id" WHERE "card_products"."card_id" = $1[0m  [["card_id", 17]]
  ↳ app/controllers/api/v1/cards_controller.rb:25:in `request_new_card'
Completed 202 Accepted in 40ms (Views: 2.8ms | ActiveRecord: 18.2ms | Allocations: 27944)


Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:21:34 +0700
  [1m[36mActiveRecord::SchemaMigration Load (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
[31mUnpermitted parameter: :product_ids. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x0000000107c549e8>, params: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
[31mUnpermitted parameter: :product_ids. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x0000000107c549e8>, params: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
[31mUnpermitted parameter: :product_ids. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x0000000107c549e8>, params: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
Completed 500 Internal Server Error in 138058ms (ActiveRecord: 12.8ms | Allocations: 248180)


  
SystemExit (exit):
  
(rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `exit'
(rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
app/controllers/api/v1/cards_controller.rb:21:in `request_new_card'
Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:23:58 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
[31mUnpermitted parameter: :product_ids. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x0000000106947850>, params: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
  [1m[36mTRANSACTION (6.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCard Create (116.5ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "black"], ["price", "0.0"], ["pin", "123456"], ["status", nil], ["user_id", 1], ["created_at", "2023-11-11 14:24:06.641628"], ["updated_at", "2023-11-11 14:24:06.641628"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mTRANSACTION (11.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCardProduct Load (1.1ms)[0m  [1m[34mSELECT "card_products".* FROM "card_products" /* loading for pp */ LIMIT $1[0m  [["LIMIT", 11]]
  ↳ app/controllers/api/v1/cards_controller.rb:24:in `request_new_card'
  [1m[36mCardProduct Count (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "card_products"[0m
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mCardProduct Load (0.5ms)[0m  [1m[34mSELECT "card_products".* FROM "card_products" ORDER BY "card_products"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
Completed 500 Internal Server Error in 86837ms (ActiveRecord: 174.5ms | Allocations: 5619654)


  
SystemExit (exit):
  
(rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `exit'
(rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
app/controllers/api/v1/cards_controller.rb:24:in `request_new_card'
Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:25:53 +0700
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
[31mUnpermitted parameter: :product_ids. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x0000000106dd7848>, params: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1[0m  [["id", 0]]
  ↳ app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
Completed 404 Not Found in 22ms (ActiveRecord: 10.2ms | Allocations: 15901)


  
ActiveRecord::RecordNotFound (Couldn't find Product with 'id'=[0]):
  
app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:26:02 +0700
  [1m[36mActiveRecord::SchemaMigration Load (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
[31mUnpermitted parameter: :product_ids. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x000000010b617ec8>, params: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1[0m  [["id", 0]]
  ↳ app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
Completed 404 Not Found in 44ms (ActiveRecord: 16.1ms | Allocations: 38162)


  
ActiveRecord::RecordNotFound (Couldn't find Product with 'id'=[0]):
  
app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:27:06 +0700
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
[31mUnpermitted parameter: :product_ids. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x000000010c9cc900>, params: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1[0m  [["id", 0]]
  ↳ app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
Completed 404 Not Found in 25ms (ActiveRecord: 13.3ms | Allocations: 15846)


  
ActiveRecord::RecordNotFound (Couldn't find Product with 'id'=[0]):
  
app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:27:20 +0700
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
[31mUnpermitted parameter: :product_ids. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x000000010b71c2b0>, params: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
[31mUnpermitted parameter: :product_ids. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x000000010b71c2b0>, params: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1[0m  [["id", 0]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
[31mUnpermitted parameter: :product_ids. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x000000010b71c2b0>, params: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1[0m  [["id", 0]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
[31mUnpermitted parameter: :product_ids. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x000000010b71c2b0>, params: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
[31mUnpermitted parameter: :product_ids. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x000000010b71c2b0>, params: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
Completed 500 Internal Server Error in 81540ms (ActiveRecord: 10.1ms | Allocations: 314632)


  
SystemExit (exit):
  
(rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `exit'
(rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:28:50 +0700
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
[31mUnpermitted parameter: :product_ids. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x000000010cf8e668>, params: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1[0m  [["id", 0]]
  ↳ app/controllers/api/v1/cards_controller.rb:21:in `request_new_card'
Completed 404 Not Found in 2ms (ActiveRecord: 0.7ms | Allocations: 1917)


  
ActiveRecord::RecordNotFound (Couldn't find Product with 'id'=[0]):
  
app/controllers/api/v1/cards_controller.rb:21:in `request_new_card'
Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:29:02 +0700
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
[31mUnpermitted parameter: :product_ids. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x0000000109f45470>, params: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
[31mUnpermitted parameter: :product_ids. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x0000000109f45470>, params: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
Completed 500 Internal Server Error in 400902ms (ActiveRecord: 6.6ms | Allocations: 347652)


  
SystemExit (exit):
  
(rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `exit'
(rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:35:48 +0700
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
[31mUnpermitted parameter: :product_ids. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x000000010a536e38>, params: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
Completed 500 Internal Server Error in 28339ms (ActiveRecord: 9.0ms | Allocations: 188497)


  
SystemExit (exit):
  
(rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `exit'
(rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:37:03 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
[31mUnpermitted parameter: :product_ids. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x000000010868e3a0>, params: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
[31mUnpermitted parameter: :product_ids. Context: { controller: Api::V1::CardsController, action: request_new_card, request: #<ActionDispatch::Request:0x000000010868e3a0>, params: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}, "controller"=>"api/v1/cards", "action"=>"request_new_card"} }[0m
Completed 500 Internal Server Error in 22778ms (ActiveRecord: 14.3ms | Allocations: 212762)


  
SystemExit (exit):
  
(rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `exit'
(rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `card_request_params'
app/controllers/api/v1/cards_controller.rb:52:in `card_request_params'
app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:37:47 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
Completed 500 Internal Server Error in 41583ms (ActiveRecord: 9.8ms | Allocations: 225509)


  
SystemExit (exit):
  
(rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `exit'
(rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `card_request_params'
app/controllers/api/v1/cards_controller.rb:52:in `card_request_params'
app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:40:16 +0700
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN ($1, $2)[0m  [["id", 0], ["id", 2]]
  ↳ app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
Completed 404 Not Found in 29ms (ActiveRecord: 11.1ms | Allocations: 25101)


  
ActiveRecord::RecordNotFound (Couldn't find all Products with 'id': (0, 2) (found 1 results, but was looking for 2). Couldn't find Product with id 0.):
  
app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:40:21 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"[1, 2]", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
Completed 500 Internal Server Error in 270655ms (ActiveRecord: 13.3ms | Allocations: 278372)


  
SystemExit (exit):
  
(rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `exit'
(rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `card_request_params'
app/controllers/api/v1/cards_controller.rb:52:in `card_request_params'
app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:44:58 +0700
  [1m[36mActiveRecord::SchemaMigration Load (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"1,2", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mProduct Load (6.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  ↳ app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
  [1m[36mTRANSACTION (6.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCard Create (119.2ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "black"], ["price", "0.0"], ["pin", "123456"], ["status", nil], ["user_id", 1], ["created_at", "2023-11-11 14:45:37.044712"], ["updated_at", "2023-11-11 14:45:37.044712"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCardProduct Create (8.5ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 19], ["product_id", 1], ["created_at", "2023-11-11 14:45:37.465882"], ["updated_at", "2023-11-11 14:45:37.465882"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCardProduct Create (7.6ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 19], ["product_id", 2], ["created_at", "2023-11-11 14:45:37.812730"], ["updated_at", "2023-11-11 14:45:37.812730"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mTRANSACTION (5.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
Completed 202 Accepted in 64569ms (Views: 1.3ms | ActiveRecord: 188.9ms | Allocations: 13786506)


Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:47:19 +0700
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"1,2", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  ↳ app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCard Create (12.2ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "black"], ["price", "0.0"], ["pin", "123456"], ["status", nil], ["user_id", 1], ["created_at", "2023-11-11 14:48:58.033871"], ["updated_at", "2023-11-11 14:48:58.033871"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCardProduct Create (0.7ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 20], ["product_id", 1], ["created_at", "2023-11-11 14:48:58.047869"], ["updated_at", "2023-11-11 14:48:58.047869"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCardProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 20], ["product_id", 2], ["created_at", "2023-11-11 14:48:58.049668"], ["updated_at", "2023-11-11 14:48:58.049668"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
Completed 202 Accepted in 98552ms (Views: 0.9ms | ActiveRecord: 15.7ms | Allocations: 160570)


Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:51:05 +0700
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"1,2", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  ↳ app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCard Create (1.4ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "black"], ["price", "0.0"], ["pin", "123456"], ["status", nil], ["user_id", 1], ["created_at", "2023-11-11 14:51:05.223953"], ["updated_at", "2023-11-11 14:51:05.223953"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCardProduct Create (0.6ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 21], ["product_id", 1], ["created_at", "2023-11-11 14:51:05.226162"], ["updated_at", "2023-11-11 14:51:05.226162"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCardProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 21], ["product_id", 2], ["created_at", "2023-11-11 14:51:05.227302"], ["updated_at", "2023-11-11 14:51:05.227302"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mProduct Sum (3.0ms)[0m  [1m[34mSELECT SUM("products"."price") FROM "products" INNER JOIN "card_products" ON "products"."id" = "card_products"."product_id" WHERE "card_products"."card_id" = $1[0m  [["card_id", 21]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mCACHE Product Sum (0.0ms)[0m  [1m[34mSELECT SUM("products"."price") FROM "products" INNER JOIN "card_products" ON "products"."id" = "card_products"."product_id" WHERE "card_products"."card_id" = $1[0m  [["card_id", 21]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mProduct Sum (1.4ms)[0m  [1m[34mSELECT SUM("products"."price") FROM "products" INNER JOIN "card_products" ON "products"."id" = "card_products"."product_id" WHERE "card_products"."card_id" = $1[0m  [["card_id", 21]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mCACHE Product Sum (0.0ms)[0m  [1m[34mSELECT SUM("products"."price") FROM "products" INNER JOIN "card_products" ON "products"."id" = "card_products"."product_id" WHERE "card_products"."card_id" = $1[0m  [["card_id", 21]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
Completed 500 Internal Server Error in 323198ms (ActiveRecord: 27.7ms | Allocations: 400384)


  
SystemExit (exit):
  
(rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `exit'
(rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
app/controllers/api/v1/cards_controller.rb:24:in `request_new_card'
Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:56:34 +0700
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"1,2", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mProduct Load (1.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  ↳ app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCard Create (1.2ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "black"], ["price", "0.0"], ["pin", "123456"], ["status", nil], ["user_id", 1], ["created_at", "2023-11-11 14:56:34.949563"], ["updated_at", "2023-11-11 14:56:34.949563"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCardProduct Create (1.0ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 22], ["product_id", 1], ["created_at", "2023-11-11 14:56:34.951607"], ["updated_at", "2023-11-11 14:56:34.951607"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCardProduct Create (1.2ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 22], ["product_id", 2], ["created_at", "2023-11-11 14:56:34.953146"], ["updated_at", "2023-11-11 14:56:34.953146"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
Completed 202 Accepted in 4267ms (Views: 1.9ms | ActiveRecord: 25.5ms | Allocations: 212332)


Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:57:27 +0700
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"1,2", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  ↳ app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCard Create (1.3ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "black"], ["price", "0.0"], ["pin", "123456"], ["status", nil], ["user_id", 1], ["created_at", "2023-11-11 14:57:28.052889"], ["updated_at", "2023-11-11 14:57:28.052889"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCardProduct Create (1.2ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 23], ["product_id", 1], ["created_at", "2023-11-11 14:57:28.055035"], ["updated_at", "2023-11-11 14:57:28.055035"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCardProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 23], ["product_id", 2], ["created_at", "2023-11-11 14:57:28.056855"], ["updated_at", "2023-11-11 14:57:28.056855"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mProduct Sum (0.6ms)[0m  [1m[34mSELECT SUM("products"."price") FROM "products" INNER JOIN "card_products" ON "products"."id" = "card_products"."product_id" WHERE "card_products"."card_id" = $1[0m  [["card_id", 23]]
  ↳ app/controllers/api/v1/cards_controller.rb:24:in `request_new_card'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/cards_controller.rb:24:in `request_new_card'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/api/v1/cards_controller.rb:24:in `request_new_card'
Completed 202 Accepted in 103ms (Views: 0.3ms | ActiveRecord: 27.5ms | Allocations: 60929)


Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:58:16 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"1,2", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  ↳ app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCard Create (1.2ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "black"], ["price", "0.0"], ["pin", "123456"], ["status", nil], ["user_id", 1], ["created_at", "2023-11-11 14:58:16.500367"], ["updated_at", "2023-11-11 14:58:16.500367"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCardProduct Create (0.7ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 24], ["product_id", 1], ["created_at", "2023-11-11 14:58:16.502369"], ["updated_at", "2023-11-11 14:58:16.502369"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCardProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 24], ["product_id", 2], ["created_at", "2023-11-11 14:58:16.503596"], ["updated_at", "2023-11-11 14:58:16.503596"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
Completed 202 Accepted in 59ms (Views: 0.3ms | ActiveRecord: 20.2ms | Allocations: 56863)


Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 21:58:49 +0700
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"1,2", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  ↳ app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCard Create (0.8ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "black"], ["price", "0.0"], ["pin", "123456"], ["status", nil], ["user_id", 1], ["created_at", "2023-11-11 14:58:49.847935"], ["updated_at", "2023-11-11 14:58:49.847935"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCardProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 25], ["product_id", 1], ["created_at", "2023-11-11 14:58:49.849410"], ["updated_at", "2023-11-11 14:58:49.849410"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCardProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 25], ["product_id", 2], ["created_at", "2023-11-11 14:58:49.850206"], ["updated_at", "2023-11-11 14:58:49.850206"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCard Load (0.5ms)[0m  [1m[34mSELECT "cards".* FROM "cards" ORDER BY "cards"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mCACHE Card Load (0.0ms)[0m  [1m[34mSELECT "cards".* FROM "cards" ORDER BY "cards"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ (rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
  [1m[36mProduct Load (2.1ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "card_products" ON "products"."id" = "card_products"."product_id" WHERE "card_products"."card_id" = $1 /* loading for pp */ LIMIT $2[0m  [["card_id", 25], ["LIMIT", 11]]
  ↳ app/controllers/api/v1/cards_controller.rb:24:in `request_new_card'
Completed 500 Internal Server Error in 94191ms (ActiveRecord: 20.6ms | Allocations: 232354)


  
SystemExit (exit):
  
(rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `exit'
(rdbg)//Users/thaiphuc/projects/product-backend/app/controllers/api/v1/cards_controller.rb:1:in `request_new_card'
app/controllers/api/v1/cards_controller.rb:24:in `request_new_card'
  [1m[36mCard Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "cards"[0m
  [1m[36mCard Load (1.2ms)[0m  [1m[34mSELECT "cards".* FROM "cards"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCard Destroy (6.0ms)[0m  [1m[31mDELETE FROM "cards" WHERE "cards"."id" = $1[0m  [["id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mCardProduct Load (1.5ms)[0m  [1m[34mSELECT "card_products".* FROM "card_products" /* loading for pp */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCardProduct Load (1.0ms)[0m  [1m[34mSELECT "card_products".* FROM "card_products"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCardProduct Destroy (0.8ms)[0m  [1m[31mDELETE FROM "card_products" WHERE "card_products"."id" = $1[0m  [["id", 1]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCardProduct Destroy (0.5ms)[0m  [1m[31mDELETE FROM "card_products" WHERE "card_products"."id" = $1[0m  [["id", 2]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCardProduct Destroy (0.4ms)[0m  [1m[31mDELETE FROM "card_products" WHERE "card_products"."id" = $1[0m  [["id", 3]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCardProduct Destroy (0.5ms)[0m  [1m[31mDELETE FROM "card_products" WHERE "card_products"."id" = $1[0m  [["id", 4]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCardProduct Destroy (0.4ms)[0m  [1m[31mDELETE FROM "card_products" WHERE "card_products"."id" = $1[0m  [["id", 5]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCardProduct Destroy (0.4ms)[0m  [1m[31mDELETE FROM "card_products" WHERE "card_products"."id" = $1[0m  [["id", 6]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCardProduct Destroy (0.4ms)[0m  [1m[31mDELETE FROM "card_products" WHERE "card_products"."id" = $1[0m  [["id", 7]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCardProduct Destroy (0.4ms)[0m  [1m[31mDELETE FROM "card_products" WHERE "card_products"."id" = $1[0m  [["id", 8]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCardProduct Destroy (0.4ms)[0m  [1m[31mDELETE FROM "card_products" WHERE "card_products"."id" = $1[0m  [["id", 9]]
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCardProduct Destroy (0.5ms)[0m  [1m[31mDELETE FROM "card_products" WHERE "card_products"."id" = $1[0m  [["id", 10]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCardProduct Destroy (0.9ms)[0m  [1m[31mDELETE FROM "card_products" WHERE "card_products"."id" = $1[0m  [["id", 11]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCardProduct Destroy (0.4ms)[0m  [1m[31mDELETE FROM "card_products" WHERE "card_products"."id" = $1[0m  [["id", 12]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCardProduct Destroy (0.5ms)[0m  [1m[31mDELETE FROM "card_products" WHERE "card_products"."id" = $1[0m  [["id", 13]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCardProduct Destroy (0.4ms)[0m  [1m[31mDELETE FROM "card_products" WHERE "card_products"."id" = $1[0m  [["id", 14]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCardProduct Destroy (0.4ms)[0m  [1m[31mDELETE FROM "card_products" WHERE "card_products"."id" = $1[0m  [["id", 15]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCardProduct Destroy (0.4ms)[0m  [1m[31mDELETE FROM "card_products" WHERE "card_products"."id" = $1[0m  [["id", 16]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCardProduct Destroy (0.4ms)[0m  [1m[31mDELETE FROM "card_products" WHERE "card_products"."id" = $1[0m  [["id", 17]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCardProduct Destroy (0.4ms)[0m  [1m[31mDELETE FROM "card_products" WHERE "card_products"."id" = $1[0m  [["id", 18]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCardProduct Destroy (0.3ms)[0m  [1m[31mDELETE FROM "card_products" WHERE "card_products"."id" = $1[0m  [["id", 19]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCardProduct Destroy (0.4ms)[0m  [1m[31mDELETE FROM "card_products" WHERE "card_products"."id" = $1[0m  [["id", 20]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCardProduct Destroy (0.4ms)[0m  [1m[31mDELETE FROM "card_products" WHERE "card_products"."id" = $1[0m  [["id", 21]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCardProduct Destroy (0.5ms)[0m  [1m[31mDELETE FROM "card_products" WHERE "card_products"."id" = $1[0m  [["id", 22]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCardProduct Destroy (8.6ms)[0m  [1m[31mDELETE FROM "card_products" WHERE "card_products"."id" = $1[0m  [["id", 23]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCardProduct Destroy (0.3ms)[0m  [1m[31mDELETE FROM "card_products" WHERE "card_products"."id" = $1[0m  [["id", 24]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCardProduct Destroy (0.4ms)[0m  [1m[31mDELETE FROM "card_products" WHERE "card_products"."id" = $1[0m  [["id", 25]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCardProduct Destroy (3.2ms)[0m  [1m[31mDELETE FROM "card_products" WHERE "card_products"."id" = $1[0m  [["id", 26]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" /* loading for pp */ LIMIT $1[0m  [["LIMIT", 11]]
Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 22:01:46 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"1,2", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  ↳ app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCard Create (1.2ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "black"], ["price", "0.0"], ["pin", "123456"], ["status", nil], ["user_id", 1], ["created_at", "2023-11-11 15:01:46.786413"], ["updated_at", "2023-11-11 15:01:46.786413"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCardProduct Create (0.6ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 26], ["product_id", 1], ["created_at", "2023-11-11 15:01:46.788459"], ["updated_at", "2023-11-11 15:01:46.788459"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCardProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 26], ["product_id", 2], ["created_at", "2023-11-11 15:01:46.789596"], ["updated_at", "2023-11-11 15:01:46.789596"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
Completed 202 Accepted in 101ms (Views: 0.3ms | ActiveRecord: 35.5ms | Allocations: 56873)


  [1m[36mCard Load (0.7ms)[0m  [1m[34mSELECT "cards".* FROM "cards" /* loading for pp */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCard Count (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "cards"[0m
  [1m[36mCard Load (0.4ms)[0m  [1m[34mSELECT "cards".* FROM "cards" ORDER BY "cards"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCard Load (1.1ms)[0m  [1m[34mSELECT "cards".* FROM "cards" ORDER BY "cards"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "card_products" ON "products"."id" = "card_products"."product_id" WHERE "card_products"."card_id" = $1 /* loading for pp */ LIMIT $2[0m  [["card_id", 26], ["LIMIT", 11]]
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Destroy (2.8ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = $1[0m  [["id", 1]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" /* loading for pp */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCardProduct Load (1.0ms)[0m  [1m[34mSELECT "card_products".* FROM "card_products"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCardProduct Destroy (0.9ms)[0m  [1m[31mDELETE FROM "card_products" WHERE "card_products"."id" = $1[0m  [["id", 27]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCardProduct Destroy (0.5ms)[0m  [1m[31mDELETE FROM "card_products" WHERE "card_products"."id" = $1[0m  [["id", 28]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCard Load (0.7ms)[0m  [1m[34mSELECT "cards".* FROM "cards"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCard Destroy (1.1ms)[0m  [1m[31mDELETE FROM "cards" WHERE "cards"."id" = $1[0m  [["id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCard Destroy (0.5ms)[0m  [1m[31mDELETE FROM "cards" WHERE "cards"."id" = $1[0m  [["id", 2]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCard Destroy (0.6ms)[0m  [1m[31mDELETE FROM "cards" WHERE "cards"."id" = $1[0m  [["id", 3]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCard Destroy (0.4ms)[0m  [1m[31mDELETE FROM "cards" WHERE "cards"."id" = $1[0m  [["id", 4]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCard Destroy (0.5ms)[0m  [1m[31mDELETE FROM "cards" WHERE "cards"."id" = $1[0m  [["id", 5]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCard Destroy (0.5ms)[0m  [1m[31mDELETE FROM "cards" WHERE "cards"."id" = $1[0m  [["id", 6]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCard Destroy (0.4ms)[0m  [1m[31mDELETE FROM "cards" WHERE "cards"."id" = $1[0m  [["id", 7]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCard Destroy (1.5ms)[0m  [1m[31mDELETE FROM "cards" WHERE "cards"."id" = $1[0m  [["id", 8]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCard Destroy (0.5ms)[0m  [1m[31mDELETE FROM "cards" WHERE "cards"."id" = $1[0m  [["id", 9]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCard Destroy (0.7ms)[0m  [1m[31mDELETE FROM "cards" WHERE "cards"."id" = $1[0m  [["id", 10]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCard Destroy (0.4ms)[0m  [1m[31mDELETE FROM "cards" WHERE "cards"."id" = $1[0m  [["id", 11]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCard Destroy (0.5ms)[0m  [1m[31mDELETE FROM "cards" WHERE "cards"."id" = $1[0m  [["id", 12]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCard Destroy (0.4ms)[0m  [1m[31mDELETE FROM "cards" WHERE "cards"."id" = $1[0m  [["id", 13]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCard Destroy (0.8ms)[0m  [1m[31mDELETE FROM "cards" WHERE "cards"."id" = $1[0m  [["id", 14]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCard Destroy (0.3ms)[0m  [1m[31mDELETE FROM "cards" WHERE "cards"."id" = $1[0m  [["id", 15]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCard Destroy (0.3ms)[0m  [1m[31mDELETE FROM "cards" WHERE "cards"."id" = $1[0m  [["id", 16]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCard Destroy (0.4ms)[0m  [1m[31mDELETE FROM "cards" WHERE "cards"."id" = $1[0m  [["id", 17]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCard Destroy (0.4ms)[0m  [1m[31mDELETE FROM "cards" WHERE "cards"."id" = $1[0m  [["id", 18]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCard Destroy (0.4ms)[0m  [1m[31mDELETE FROM "cards" WHERE "cards"."id" = $1[0m  [["id", 19]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCard Destroy (0.3ms)[0m  [1m[31mDELETE FROM "cards" WHERE "cards"."id" = $1[0m  [["id", 20]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCard Destroy (0.6ms)[0m  [1m[31mDELETE FROM "cards" WHERE "cards"."id" = $1[0m  [["id", 21]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCard Destroy (0.3ms)[0m  [1m[31mDELETE FROM "cards" WHERE "cards"."id" = $1[0m  [["id", 22]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCard Destroy (0.3ms)[0m  [1m[31mDELETE FROM "cards" WHERE "cards"."id" = $1[0m  [["id", 23]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCard Destroy (1.2ms)[0m  [1m[31mDELETE FROM "cards" WHERE "cards"."id" = $1[0m  [["id", 24]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCard Destroy (0.3ms)[0m  [1m[31mDELETE FROM "cards" WHERE "cards"."id" = $1[0m  [["id", 25]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCard Destroy (0.3ms)[0m  [1m[31mDELETE FROM "cards" WHERE "cards"."id" = $1[0m  [["id", 26]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 22:05:59 +0700
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"black", "pin"=>"123456", "product_ids"=>"1,2", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  ↳ app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCard Create (2.0ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "black"], ["price", "0.0"], ["pin", "123456"], ["status", nil], ["user_id", 1], ["created_at", "2023-11-11 15:05:59.412900"], ["updated_at", "2023-11-11 15:05:59.412900"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCardProduct Create (0.7ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 27], ["product_id", 1], ["created_at", "2023-11-11 15:05:59.415896"], ["updated_at", "2023-11-11 15:05:59.415896"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCardProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 27], ["product_id", 2], ["created_at", "2023-11-11 15:05:59.417152"], ["updated_at", "2023-11-11 15:05:59.417152"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "card_products" ON "products"."id" = "card_products"."product_id" WHERE "card_products"."card_id" = $1[0m  [["card_id", 27]]
  ↳ app/controllers/api/v1/cards_controller.rb:26:in `request_new_card'
Completed 202 Accepted in 98ms (Views: 0.3ms | ActiveRecord: 26.9ms | Allocations: 58688)


  [1m[36mCard Load (1.3ms)[0m  [1m[34mSELECT "cards".* FROM "cards" /* loading for pp */ LIMIT $1[0m  [["LIMIT", 11]]
Started GET "/api/v1/cards/27" for ::1 at 2023-11-11 22:58:46 +0700
Processing by Api::V1::CardsController#show as */*
  Parameters: {"id"=>"27"}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mCard Load (0.7ms)[0m  [1m[34mSELECT "cards".* FROM "cards" WHERE "cards"."user_id" = $1 AND "cards"."id" = $2 LIMIT $3[0m  [["user_id", 1], ["id", 27], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/cards_controller.rb:72:in `set_card'
Completed 200 OK in 30ms (Views: 0.2ms | ActiveRecord: 8.7ms | Allocations: 15224)


Started GET "/api/v1/cards/27/products" for ::1 at 2023-11-11 22:59:21 +0700
  
ActionController::RoutingError (No route matches [GET] "/api/v1/cards/27/products"):
  
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCard Load (0.4ms)[0m  [1m[34mSELECT "cards".* FROM "cards" WHERE "cards"."user_id" = $1 /* loading for pp */ LIMIT $2[0m  [["user_id", 3], ["LIMIT", 11]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCard Load (0.6ms)[0m  [1m[34mSELECT "cards".* FROM "cards" WHERE "cards"."user_id" = $1 /* loading for pp */ LIMIT $2[0m  [["user_id", 1], ["LIMIT", 11]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCard Load (0.4ms)[0m  [1m[34mSELECT "cards".* FROM "cards" WHERE "cards"."user_id" = $1 ORDER BY "cards"."id" ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCard Load (0.3ms)[0m  [1m[34mSELECT "cards".* FROM "cards" WHERE "cards"."user_id" = $1 ORDER BY "cards"."id" ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[36mProduct Load (2.1ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "card_products" ON "products"."id" = "card_products"."product_id" WHERE "card_products"."card_id" = $1 /* loading for pp */ LIMIT $2[0m  [["card_id", 27], ["LIMIT", 11]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCard Pluck (0.4ms)[0m  [1m[34mSELECT "cards"."id" FROM "cards" WHERE "cards"."user_id" = $1[0m  [["user_id", 1]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (3.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCard Load (0.7ms)[0m  [1m[34mSELECT "cards".* FROM "cards" INNER JOIN "card_products" ON "cards"."id" = "card_products"."card_id" WHERE "card_products"."product_id" = $1 /* loading for pp */ LIMIT $2[0m  [["product_id", 1], ["LIMIT", 11]]
  [1m[36mProduct Count (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" INNER JOIN "card_products" ON "card_products"."product_id" = "products"."id" INNER JOIN "cards" ON "cards"."id" = "card_products"."card_id"[0m
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "card_products" ON "card_products"."product_id" = "products"."id" INNER JOIN "cards" ON "cards"."id" = "card_products"."card_id" /* loading for pp */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mProduct Load (1.7ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "card_products" ON "card_products"."product_id" = "products"."id" INNER JOIN "cards" ON "cards"."id" = "card_products"."card_id" WHERE (card_id in (1,2)) /* loading for pp */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "card_products" ON "card_products"."product_id" = "products"."id" INNER JOIN "cards" ON "cards"."id" = "card_products"."card_id" WHERE (card_id in (1,2)) /* loading for pp */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "card_products" ON "card_products"."product_id" = "products"."id" INNER JOIN "cards" ON "cards"."id" = "card_products"."card_id" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "card_products" ON "card_products"."product_id" = "products"."id" INNER JOIN "cards" ON "cards"."id" = "card_products"."card_id" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCard Load (0.4ms)[0m  [1m[34mSELECT "cards".* FROM "cards" INNER JOIN "card_products" ON "cards"."id" = "card_products"."card_id" WHERE "card_products"."product_id" = $1 /* loading for pp */ LIMIT $2[0m  [["product_id", 1], ["LIMIT", 11]]
  [1m[36mProduct Load (2.1ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "card_products" ON "card_products"."product_id" = "products"."id" INNER JOIN "cards" ON "cards"."id" = "card_products"."card_id" WHERE (card_id in (27,2)) /* loading for pp */ LIMIT $1[0m  [["LIMIT", 11]]
Started POST "/api/v1/clients/request-new-card" for ::1 at 2023-11-11 23:20:35 +0700
Processing by Api::V1::CardsController#request_new_card as */*
  Parameters: {"card"=>{"name"=>"blackdflakjsdfga", "pin"=>"12345623", "product_ids"=>"1,2", "price"=>"0"}}
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  ↳ app/controllers/api/v1/cards_controller.rb:20:in `request_new_card'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCard Create (2.8ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "blackdflakjsdfga"], ["price", "0.0"], ["pin", "12345623"], ["status", true], ["user_id", 1], ["created_at", "2023-11-11 16:20:35.294414"], ["updated_at", "2023-11-11 16:20:35.294414"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCardProduct Create (1.7ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 28], ["product_id", 1], ["created_at", "2023-11-11 16:20:35.298213"], ["updated_at", "2023-11-11 16:20:35.298213"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mCardProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 28], ["product_id", 2], ["created_at", "2023-11-11 16:20:35.300512"], ["updated_at", "2023-11-11 16:20:35.300512"]]
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/api/v1/cards_controller.rb:22:in `request_new_card'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "card_products" ON "products"."id" = "card_products"."product_id" WHERE "card_products"."card_id" = $1[0m  [["card_id", 28]]
  ↳ app/controllers/api/v1/cards_controller.rb:26:in `request_new_card'
Completed 202 Accepted in 40ms (Views: 0.3ms | ActiveRecord: 16.6ms | Allocations: 30819)


  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for pp */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCard Load (0.4ms)[0m  [1m[34mSELECT "cards".* FROM "cards" WHERE "cards"."user_id" = $1 /* loading for pp */ LIMIT $2[0m  [["user_id", 1], ["LIMIT", 11]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mUser Destroy (2.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 2]]
Started GET "/api/v1/clients/products" for ::1 at 2023-11-11 23:22:16 +0700
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [GET] "/api/v1/clients/products"):
  
Started GET "/api/v1/clients/products" for ::1 at 2023-11-11 23:22:46 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::ReportsController#all_products_of_user as */*
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thai@gmail.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mCard Pluck (0.6ms)[0m  [1m[34mSELECT "cards"."id" FROM "cards" WHERE "cards"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/reports_controller.rb:9:in `all_products_of_user'
  [1m[36mProduct Load (1.8ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "card_products" ON "card_products"."product_id" = "products"."id" INNER JOIN "cards" ON "cards"."id" = "card_products"."card_id" WHERE (card_id in (27,28))[0m
  ↳ app/controllers/api/v1/reports_controller.rb:11:in `all_products_of_user'
Completed 200 OK in 58ms (Views: 7.5ms | ActiveRecord: 18.8ms | Allocations: 41938)


  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Load (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (8213.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "product_backend_development"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (33.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "product_backend_development"[0m
  [1m[35m (19.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "product_backend_test"[0m
  [1m[35m (140.8ms)[0m  [1m[35mCREATE DATABASE "product_backend_development" ENCODING = 'unicode'[0m
  [1m[35m (47.3ms)[0m  [1m[35mCREATE DATABASE "product_backend_test" ENCODING = 'unicode'[0m
  [1m[35m (7.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2023-11-12 03:33:32.668142', '2023-11-12 03:33:32.668144') RETURNING "key"[0m
Migrating to CreateUsers (20231110152455)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "role" character varying, "status" boolean, "password_digest" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110152455') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCards (20231110153707)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE TABLE "cards" ("id" bigserial primary key, "name" character varying, "price" decimal, "pin" character varying, "status" character varying, "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_8ef7749967"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_cards_on_user_id" ON "cards" ("user_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110153707') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBrands (20231110155231)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "brands" ("id" bigserial primary key, "name" character varying, "avatar" character varying, "short_name" character varying, "status" boolean, "store_number" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110155231') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProducts (20231110155459)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.1ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying, "avatar" character varying, "sku" character varying, "status" boolean, "price" decimal, "brand_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f3b4d49caa"
FOREIGN KEY ("brand_id")
  REFERENCES "brands" ("id")
)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_products_on_brand_id" ON "products" ("brand_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110155459') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCardProducts (20231110160118)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "card_products" ("id" bigserial primary key, "card_id" bigint NOT NULL, "product_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f95aa900bf"
FOREIGN KEY ("card_id")
  REFERENCES "cards" ("id")
, CONSTRAINT "fk_rails_0c6f04d089"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_card_products_on_card_id" ON "card_products" ("card_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_card_products_on_product_id" ON "card_products" ("product_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110160118') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mBrand Load (0.8ms)[0m  [1m[34mSELECT "brands".* FROM "brands"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (1.1ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "KFC"], ["avatar", "https://www.gravatar.com/avatar/10?s=64&d=identicon&r=PG"], ["short_name", "KFC"], ["status", true], ["store_number", 12], ["created_at", "2023-11-12 03:33:37.248582"], ["updated_at", "2023-11-12 03:33:37.248582"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.6ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "the coffee house"], ["avatar", "https://www.gravatar.com/avatar/11?s=64&d=identicon&r=PG"], ["short_name", "TCH"], ["status", true], ["store_number", 232], ["created_at", "2023-11-12 03:33:37.251073"], ["updated_at", "2023-11-12 03:33:37.251073"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.6ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "circle K"], ["avatar", "https://www.gravatar.com/avatar/13?s=64&d=identicon&r=PG"], ["short_name", "CRK"], ["status", true], ["store_number", 156], ["created_at", "2023-11-12 03:33:37.252481"], ["updated_at", "2023-11-12 03:33:37.252481"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mBrand Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "brands"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "role", "status", "password_digest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "admin@test.com"], ["name", "Admin"], ["role", "Admin"], ["status", true], ["password_digest", "[FILTERED]"], ["created_at", "2023-11-12 03:33:37.261951"], ["updated_at", "2023-11-12 03:33:37.261951"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (32.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "product_backend_development"[0m
  [1m[35m (20.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "product_backend_test"[0m
  [1m[35m (76.4ms)[0m  [1m[35mCREATE DATABASE "product_backend_development" ENCODING = 'unicode'[0m
  [1m[35m (39.1ms)[0m  [1m[35mCREATE DATABASE "product_backend_test" ENCODING = 'unicode'[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2023-11-12 03:35:44.196701', '2023-11-12 03:35:44.196704') RETURNING "key"[0m
Migrating to CreateUsers (20231110152455)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "role" character varying, "status" boolean, "password_digest" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110152455') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCards (20231110153707)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "cards" ("id" bigserial primary key, "name" character varying, "price" decimal, "pin" character varying, "status" character varying, "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_8ef7749967"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_cards_on_user_id" ON "cards" ("user_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110153707') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBrands (20231110155231)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "brands" ("id" bigserial primary key, "name" character varying, "avatar" character varying, "short_name" character varying, "status" boolean, "store_number" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110155231') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProducts (20231110155459)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying, "avatar" character varying, "sku" character varying, "status" boolean, "price" decimal, "brand_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f3b4d49caa"
FOREIGN KEY ("brand_id")
  REFERENCES "brands" ("id")
)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_products_on_brand_id" ON "products" ("brand_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110155459') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCardProducts (20231110160118)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "card_products" ("id" bigserial primary key, "card_id" bigint NOT NULL, "product_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f95aa900bf"
FOREIGN KEY ("card_id")
  REFERENCES "cards" ("id")
, CONSTRAINT "fk_rails_0c6f04d089"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_card_products_on_card_id" ON "card_products" ("card_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_card_products_on_product_id" ON "card_products" ("product_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110160118') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mBrand Load (1.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (1.2ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "KFC"], ["avatar", "https://www.gravatar.com/avatar/3?s=64&d=identicon&r=PG"], ["short_name", "KFC"], ["status", true], ["store_number", 12], ["created_at", "2023-11-12 03:35:47.934177"], ["updated_at", "2023-11-12 03:35:47.934177"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.6ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "the coffee house"], ["avatar", "https://www.gravatar.com/avatar/0?s=64&d=identicon&r=PG"], ["short_name", "TCH"], ["status", true], ["store_number", 232], ["created_at", "2023-11-12 03:35:47.937266"], ["updated_at", "2023-11-12 03:35:47.937266"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.6ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "circle K"], ["avatar", "https://www.gravatar.com/avatar/7?s=64&d=identicon&r=PG"], ["short_name", "CRK"], ["status", true], ["store_number", 156], ["created_at", "2023-11-12 03:35:47.938852"], ["updated_at", "2023-11-12 03:35:47.938852"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mBrand Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "brands"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "role", "status", "password_digest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "admin@test.com"], ["name", "Admin"], ["role", "Admin"], ["status", true], ["password_digest", "[FILTERED]"], ["created_at", "2023-11-12 03:35:47.949958"], ["updated_at", "2023-11-12 03:35:47.949958"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mBrand Load (2.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."brand_id" = $1[0m  [["brand_id", 1]]
  [1m[36mBrand Destroy (3.3ms)[0m  [1m[31mDELETE FROM "brands" WHERE "brands"."id" = $1[0m  [["id", 1]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."brand_id" = $1[0m  [["brand_id", 2]]
  [1m[36mBrand Destroy (0.3ms)[0m  [1m[31mDELETE FROM "brands" WHERE "brands"."id" = $1[0m  [["id", 2]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."brand_id" = $1[0m  [["brand_id", 3]]
  [1m[36mBrand Destroy (0.4ms)[0m  [1m[31mDELETE FROM "brands" WHERE "brands"."id" = $1[0m  [["id", 3]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.8ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "KFC"], ["avatar", "https://www.gravatar.com/avatar/10?s=64&d=identicon&r=PG"], ["short_name", "KFC"], ["status", true], ["store_number", 12], ["created_at", "2023-11-12 03:36:35.937905"], ["updated_at", "2023-11-12 03:36:35.937905"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.5ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "the coffee house"], ["avatar", "https://www.gravatar.com/avatar/1?s=64&d=identicon&r=PG"], ["short_name", "TCH"], ["status", true], ["store_number", 232], ["created_at", "2023-11-12 03:36:35.958114"], ["updated_at", "2023-11-12 03:36:35.958114"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (1.6ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "circle K"], ["avatar", "https://www.gravatar.com/avatar/8?s=64&d=identicon&r=PG"], ["short_name", "CRK"], ["status", true], ["store_number", 156], ["created_at", "2023-11-12 03:36:36.644014"], ["updated_at", "2023-11-12 03:36:36.644014"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mBrand Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "brands"[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (37.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "product_backend_development"[0m
  [1m[35m (19.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "product_backend_test"[0m
  [1m[35m (133.8ms)[0m  [1m[35mCREATE DATABASE "product_backend_development" ENCODING = 'unicode'[0m
  [1m[35m (45.9ms)[0m  [1m[35mCREATE DATABASE "product_backend_test" ENCODING = 'unicode'[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2023-11-12 03:39:03.575930', '2023-11-12 03:39:03.575933') RETURNING "key"[0m
Migrating to CreateUsers (20231110152455)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "role" character varying, "status" boolean, "password_digest" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110152455') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCards (20231110153707)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "cards" ("id" bigserial primary key, "name" character varying, "price" decimal, "pin" character varying, "status" character varying, "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_8ef7749967"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_cards_on_user_id" ON "cards" ("user_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110153707') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBrands (20231110155231)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "brands" ("id" bigserial primary key, "name" character varying, "avatar" character varying, "short_name" character varying, "status" boolean, "store_number" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110155231') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProducts (20231110155459)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying, "avatar" character varying, "sku" character varying, "status" boolean, "price" decimal, "brand_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f3b4d49caa"
FOREIGN KEY ("brand_id")
  REFERENCES "brands" ("id")
)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_products_on_brand_id" ON "products" ("brand_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110155459') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCardProducts (20231110160118)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "card_products" ("id" bigserial primary key, "card_id" bigint NOT NULL, "product_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f95aa900bf"
FOREIGN KEY ("card_id")
  REFERENCES "cards" ("id")
, CONSTRAINT "fk_rails_0c6f04d089"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_card_products_on_card_id" ON "card_products" ("card_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_card_products_on_product_id" ON "card_products" ("product_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110160118') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE DATABASE "product_backend_development" ENCODING = 'unicode'[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE DATABASE "product_backend_test" ENCODING = 'unicode'[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mBrand Load (0.9ms)[0m  [1m[34mSELECT "brands".* FROM "brands"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (1.2ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "KFC"], ["avatar", "https://www.gravatar.com/avatar/11?s=64&d=identicon&r=PG"], ["short_name", "KFC"], ["status", true], ["store_number", 12], ["created_at", "2023-11-12 03:39:20.361301"], ["updated_at", "2023-11-12 03:39:20.361301"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.7ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "the coffee house"], ["avatar", "https://www.gravatar.com/avatar/12?s=64&d=identicon&r=PG"], ["short_name", "TCH"], ["status", true], ["store_number", 232], ["created_at", "2023-11-12 03:39:20.363892"], ["updated_at", "2023-11-12 03:39:20.363892"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.6ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "circle K"], ["avatar", "https://www.gravatar.com/avatar/5?s=64&d=identicon&r=PG"], ["short_name", "CRK"], ["status", true], ["store_number", 156], ["created_at", "2023-11-12 03:39:20.366623"], ["updated_at", "2023-11-12 03:39:20.366623"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mBrand Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "brands"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "role", "status", "password_digest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "admin@test.com"], ["name", "Admin"], ["role", "Admin"], ["status", true], ["password_digest", "[FILTERED]"], ["created_at", "2023-11-12 03:39:20.376485"], ["updated_at", "2023-11-12 03:39:20.376485"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for pp */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Destroy (3.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (32.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "product_backend_development"[0m
  [1m[35m (18.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "product_backend_test"[0m
  [1m[35m (141.6ms)[0m  [1m[35mCREATE DATABASE "product_backend_development" ENCODING = 'unicode'[0m
  [1m[35m (48.5ms)[0m  [1m[35mCREATE DATABASE "product_backend_test" ENCODING = 'unicode'[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2023-11-12 03:41:13.625264', '2023-11-12 03:41:13.625266') RETURNING "key"[0m
Migrating to CreateUsers (20231110152455)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "role" character varying, "status" boolean, "password_digest" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110152455') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCards (20231110153707)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "cards" ("id" bigserial primary key, "name" character varying, "price" decimal, "pin" character varying, "status" character varying, "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_8ef7749967"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_cards_on_user_id" ON "cards" ("user_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110153707') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBrands (20231110155231)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "brands" ("id" bigserial primary key, "name" character varying, "avatar" character varying, "short_name" character varying, "status" boolean, "store_number" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110155231') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProducts (20231110155459)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying, "avatar" character varying, "sku" character varying, "status" boolean, "price" decimal, "brand_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f3b4d49caa"
FOREIGN KEY ("brand_id")
  REFERENCES "brands" ("id")
)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_products_on_brand_id" ON "products" ("brand_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110155459') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCardProducts (20231110160118)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "card_products" ("id" bigserial primary key, "card_id" bigint NOT NULL, "product_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f95aa900bf"
FOREIGN KEY ("card_id")
  REFERENCES "cards" ("id")
, CONSTRAINT "fk_rails_0c6f04d089"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_card_products_on_card_id" ON "card_products" ("card_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_card_products_on_product_id" ON "card_products" ("product_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110160118') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mBrand Load (0.9ms)[0m  [1m[34mSELECT "brands".* FROM "brands"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (1.1ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "KFC"], ["avatar", "https://www.gravatar.com/avatar/13?s=64&d=identicon&r=PG"], ["short_name", "KFC"], ["status", true], ["store_number", 12], ["created_at", "2023-11-12 03:41:17.060973"], ["updated_at", "2023-11-12 03:41:17.060973"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.6ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "the coffee house"], ["avatar", "https://www.gravatar.com/avatar/0?s=64&d=identicon&r=PG"], ["short_name", "TCH"], ["status", true], ["store_number", 232], ["created_at", "2023-11-12 03:41:17.063470"], ["updated_at", "2023-11-12 03:41:17.063470"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.6ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "circle K"], ["avatar", "https://www.gravatar.com/avatar/1?s=64&d=identicon&r=PG"], ["short_name", "CRK"], ["status", true], ["store_number", 156], ["created_at", "2023-11-12 03:41:17.064962"], ["updated_at", "2023-11-12 03:41:17.064962"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mBrand Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "brands"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "role", "status", "password_digest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "admin@test.com"], ["name", "Admin"], ["role", "Admin"], ["status", true], ["password_digest", "[FILTERED]"], ["created_at", "2023-11-12 03:41:17.074832"], ["updated_at", "2023-11-12 03:41:17.074832"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (34.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "product_backend_development"[0m
  [1m[35m (18.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "product_backend_test"[0m
  [1m[35m (149.2ms)[0m  [1m[35mCREATE DATABASE "product_backend_development" ENCODING = 'unicode'[0m
  [1m[35m (47.6ms)[0m  [1m[35mCREATE DATABASE "product_backend_test" ENCODING = 'unicode'[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2023-11-12 03:57:55.853620', '2023-11-12 03:57:55.853622') RETURNING "key"[0m
Migrating to CreateUsers (20231110152455)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "role" character varying, "status" boolean, "password_digest" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110152455') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCards (20231110153707)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "cards" ("id" bigserial primary key, "name" character varying, "price" decimal, "pin" character varying, "status" character varying, "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_8ef7749967"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_cards_on_user_id" ON "cards" ("user_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110153707') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBrands (20231110155231)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "brands" ("id" bigserial primary key, "name" character varying, "avatar" character varying, "short_name" character varying, "status" boolean, "store_number" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110155231') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProducts (20231110155459)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying, "avatar" character varying, "sku" character varying, "status" boolean, "price" decimal, "brand_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f3b4d49caa"
FOREIGN KEY ("brand_id")
  REFERENCES "brands" ("id")
)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_products_on_brand_id" ON "products" ("brand_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110155459') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCardProducts (20231110160118)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "card_products" ("id" bigserial primary key, "card_id" bigint NOT NULL, "product_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f95aa900bf"
FOREIGN KEY ("card_id")
  REFERENCES "cards" ("id")
, CONSTRAINT "fk_rails_0c6f04d089"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_card_products_on_card_id" ON "card_products" ("card_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_card_products_on_product_id" ON "card_products" ("product_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110160118') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mBrand Load (1.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (1.2ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "KFC"], ["avatar", "https://www.gravatar.com/avatar/9?s=64&d=identicon&r=PG"], ["short_name", "KFC"], ["status", true], ["store_number", 12], ["created_at", "2023-11-12 03:59:43.030893"], ["updated_at", "2023-11-12 03:59:43.030893"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.7ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "the coffee house"], ["avatar", "https://www.gravatar.com/avatar/7?s=64&d=identicon&r=PG"], ["short_name", "TCH"], ["status", true], ["store_number", 232], ["created_at", "2023-11-12 03:59:43.033522"], ["updated_at", "2023-11-12 03:59:43.033522"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.8ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "circle K"], ["avatar", "https://www.gravatar.com/avatar/13?s=64&d=identicon&r=PG"], ["short_name", "CRK"], ["status", true], ["store_number", 156], ["created_at", "2023-11-12 03:59:43.035108"], ["updated_at", "2023-11-12 03:59:43.035108"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mBrand Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "brands"[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "role", "status", "password_digest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "admin@test.com"], ["name", "Admin"], ["role", "Admin"], ["status", true], ["password_digest", "[FILTERED]"], ["created_at", "2023-11-12 03:59:43.046828"], ["updated_at", "2023-11-12 03:59:43.046828"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@test.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Load (0.3ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Create (2.5ms)[0m  [1m[32mINSERT INTO "products" ("name", "avatar", "sku", "status", "price", "brand_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "hambeger"], ["avatar", "https://www.gravatar.com/avatar/0?s=128&d=identicon&r=PG"], ["sku", "HBG"], ["status", true], ["price", "12.0"], ["brand_id", 1], ["created_at", "2023-11-12 03:59:43.070486"], ["updated_at", "2023-11-12 03:59:43.070486"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Load (0.2ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Create (0.5ms)[0m  [1m[32mINSERT INTO "products" ("name", "avatar", "sku", "status", "price", "brand_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "Drinking beer"], ["avatar", "https://www.gravatar.com/avatar/4?s=128&d=identicon&r=PG"], ["sku", "BER"], ["status", true], ["price", "21.0"], ["brand_id", 2], ["created_at", "2023-11-12 03:59:43.075360"], ["updated_at", "2023-11-12 03:59:43.075360"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mCard Load (1.0ms)[0m  [1m[34mSELECT "cards".* FROM "cards"[0m
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCard Create (1.3ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Black Card"], ["price", "124.0"], ["pin", "123456"], ["status", nil], ["user_id", 1], ["created_at", "2023-11-12 03:59:43.102997"], ["updated_at", "2023-11-12 03:59:43.102997"]]
  [1m[36mCardProduct Create (1.7ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 1], ["product_id", 1], ["created_at", "2023-11-12 03:59:43.104960"], ["updated_at", "2023-11-12 03:59:43.104960"]]
  [1m[36mCardProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 1], ["product_id", 2], ["created_at", "2023-11-12 03:59:43.107238"], ["updated_at", "2023-11-12 03:59:43.107238"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mBrand Load (1.8ms)[0m  [1m[34mSELECT "brands".* FROM "brands"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."brand_id" = $1[0m  [["brand_id", 1]]
  [1m[36mProduct Destroy (2.1ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = $1[0m  [["id", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (37.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "product_backend_development"[0m
  [1m[35m (19.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "product_backend_test"[0m
  [1m[35m (67.4ms)[0m  [1m[35mCREATE DATABASE "product_backend_development" ENCODING = 'unicode'[0m
  [1m[35m (38.3ms)[0m  [1m[35mCREATE DATABASE "product_backend_test" ENCODING = 'unicode'[0m
  [1m[35m (14.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "product_backend_development"[0m
  [1m[35m (19.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "product_backend_test"[0m
  [1m[35m (42.5ms)[0m  [1m[35mCREATE DATABASE "product_backend_development" ENCODING = 'unicode'[0m
  [1m[35m (35.0ms)[0m  [1m[35mCREATE DATABASE "product_backend_test" ENCODING = 'unicode'[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_try_advisory_lock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2023-11-12 04:00:57.081490', '2023-11-12 04:00:57.081493') RETURNING "key"[0m
Migrating to CreateUsers (20231110152455)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "role" character varying, "status" boolean, "password_digest" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110152455') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCards (20231110153707)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "cards" ("id" bigserial primary key, "name" character varying, "price" decimal, "pin" character varying, "status" character varying, "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_8ef7749967"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_cards_on_user_id" ON "cards" ("user_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110153707') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBrands (20231110155231)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "brands" ("id" bigserial primary key, "name" character varying, "avatar" character varying, "short_name" character varying, "status" boolean, "store_number" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110155231') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProducts (20231110155459)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying, "avatar" character varying, "sku" character varying, "status" boolean, "price" decimal, "brand_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f3b4d49caa"
FOREIGN KEY ("brand_id")
  REFERENCES "brands" ("id")
)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_products_on_brand_id" ON "products" ("brand_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110155459') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCardProducts (20231110160118)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "card_products" ("id" bigserial primary key, "card_id" bigint NOT NULL, "product_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f95aa900bf"
FOREIGN KEY ("card_id")
  REFERENCES "cards" ("id")
, CONSTRAINT "fk_rails_0c6f04d089"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_card_products_on_card_id" ON "card_products" ("card_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_card_products_on_product_id" ON "card_products" ("product_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110160118') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mBrand Load (0.2ms)[0m  [1m[34mSELECT "brands".* FROM "brands"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.6ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "KFC"], ["avatar", "https://www.gravatar.com/avatar/3?s=64&d=identicon&r=PG"], ["short_name", "KFC"], ["status", true], ["store_number", 12], ["created_at", "2023-11-12 04:00:57.140520"], ["updated_at", "2023-11-12 04:00:57.140520"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.4ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "the coffee house"], ["avatar", "https://www.gravatar.com/avatar/9?s=64&d=identicon&r=PG"], ["short_name", "TCH"], ["status", true], ["store_number", 232], ["created_at", "2023-11-12 04:00:57.142488"], ["updated_at", "2023-11-12 04:00:57.142488"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.5ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "circle K"], ["avatar", "https://www.gravatar.com/avatar/11?s=64&d=identicon&r=PG"], ["short_name", "CRK"], ["status", true], ["store_number", 156], ["created_at", "2023-11-12 04:00:57.143777"], ["updated_at", "2023-11-12 04:00:57.143777"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mBrand Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "brands"[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "role", "status", "password_digest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "admin@test.com"], ["name", "Admin"], ["role", "Admin"], ["status", true], ["password_digest", "[FILTERED]"], ["created_at", "2023-11-12 04:00:57.151361"], ["updated_at", "2023-11-12 04:00:57.151361"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@test.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Load (0.1ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "avatar", "sku", "status", "price", "brand_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "hambeger"], ["avatar", "https://www.gravatar.com/avatar/12?s=128&d=identicon&r=PG"], ["sku", "HBG"], ["status", true], ["price", "12.0"], ["brand_id", 1], ["created_at", "2023-11-12 04:00:57.163603"], ["updated_at", "2023-11-12 04:00:57.163603"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "avatar", "sku", "status", "price", "brand_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "Drinking beer"], ["avatar", "https://www.gravatar.com/avatar/10?s=128&d=identicon&r=PG"], ["sku", "BER"], ["status", true], ["price", "21.0"], ["brand_id", 2], ["created_at", "2023-11-12 04:00:57.165930"], ["updated_at", "2023-11-12 04:00:57.165930"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mCard Load (0.1ms)[0m  [1m[34mSELECT "cards".* FROM "cards"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCard Create (0.2ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Black Card"], ["price", "124.0"], ["pin", "123456"], ["status", nil], ["user_id", 1], ["created_at", "2023-11-12 04:00:57.181545"], ["updated_at", "2023-11-12 04:00:57.181545"]]
  [1m[36mCardProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 1], ["product_id", 1], ["created_at", "2023-11-12 04:00:57.182454"], ["updated_at", "2023-11-12 04:00:57.182454"]]
  [1m[36mCardProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 1], ["product_id", 2], ["created_at", "2023-11-12 04:00:57.183359"], ["updated_at", "2023-11-12 04:00:57.183359"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (31.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "product_backend_development"[0m
  [1m[35m (22.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "product_backend_test"[0m
  [1m[35m (47.0ms)[0m  [1m[35mCREATE DATABASE "product_backend_development" ENCODING = 'unicode'[0m
  [1m[35m (34.6ms)[0m  [1m[35mCREATE DATABASE "product_backend_test" ENCODING = 'unicode'[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2023-11-12 04:01:37.389826', '2023-11-12 04:01:37.389828') RETURNING "key"[0m
Migrating to CreateUsers (20231110152455)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "role" character varying, "status" boolean, "password_digest" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110152455') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCards (20231110153707)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "cards" ("id" bigserial primary key, "name" character varying, "price" decimal, "pin" character varying, "status" character varying, "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_8ef7749967"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_cards_on_user_id" ON "cards" ("user_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110153707') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBrands (20231110155231)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "brands" ("id" bigserial primary key, "name" character varying, "avatar" character varying, "short_name" character varying, "status" boolean, "store_number" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110155231') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProducts (20231110155459)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying, "avatar" character varying, "sku" character varying, "status" boolean, "price" decimal, "brand_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f3b4d49caa"
FOREIGN KEY ("brand_id")
  REFERENCES "brands" ("id")
)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_products_on_brand_id" ON "products" ("brand_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110155459') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCardProducts (20231110160118)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "card_products" ("id" bigserial primary key, "card_id" bigint NOT NULL, "product_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f95aa900bf"
FOREIGN KEY ("card_id")
  REFERENCES "cards" ("id")
, CONSTRAINT "fk_rails_0c6f04d089"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_card_products_on_card_id" ON "card_products" ("card_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_card_products_on_product_id" ON "card_products" ("product_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110160118') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mBrand Load (0.2ms)[0m  [1m[34mSELECT "brands".* FROM "brands"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.6ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "KFC"], ["avatar", "https://www.gravatar.com/avatar/8?s=64&d=identicon&r=PG"], ["short_name", "KFC"], ["status", true], ["store_number", 12], ["created_at", "2023-11-12 04:01:37.448593"], ["updated_at", "2023-11-12 04:01:37.448593"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.5ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "the coffee house"], ["avatar", "https://www.gravatar.com/avatar/13?s=64&d=identicon&r=PG"], ["short_name", "TCH"], ["status", true], ["store_number", 232], ["created_at", "2023-11-12 04:01:37.450333"], ["updated_at", "2023-11-12 04:01:37.450333"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.4ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "circle K"], ["avatar", "https://www.gravatar.com/avatar/0?s=64&d=identicon&r=PG"], ["short_name", "CRK"], ["status", true], ["store_number", 156], ["created_at", "2023-11-12 04:01:37.451758"], ["updated_at", "2023-11-12 04:01:37.451758"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mBrand Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "brands"[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "role", "status", "password_digest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "admin@test.com"], ["name", "Admin"], ["role", "Admin"], ["status", true], ["password_digest", "[FILTERED]"], ["created_at", "2023-11-12 04:01:37.459536"], ["updated_at", "2023-11-12 04:01:37.459536"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@test.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Load (0.1ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "avatar", "sku", "status", "price", "brand_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "hambeger"], ["avatar", "https://www.gravatar.com/avatar/7?s=128&d=identicon&r=PG"], ["sku", "HBG"], ["status", true], ["price", "12.0"], ["brand_id", 1], ["created_at", "2023-11-12 04:01:37.470578"], ["updated_at", "2023-11-12 04:01:37.470578"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Load (0.1ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "avatar", "sku", "status", "price", "brand_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "Drinking beer"], ["avatar", "https://www.gravatar.com/avatar/0?s=128&d=identicon&r=PG"], ["sku", "BER"], ["status", true], ["price", "21.0"], ["brand_id", 2], ["created_at", "2023-11-12 04:01:37.473280"], ["updated_at", "2023-11-12 04:01:37.473280"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mCard Load (0.1ms)[0m  [1m[34mSELECT "cards".* FROM "cards"[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCard Create (0.3ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Black Card"], ["price", "124.0"], ["pin", "123456"], ["status", nil], ["user_id", 1], ["created_at", "2023-11-12 04:01:37.489707"], ["updated_at", "2023-11-12 04:01:37.489707"]]
  [1m[36mCardProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 1], ["product_id", 1], ["created_at", "2023-11-12 04:01:37.490770"], ["updated_at", "2023-11-12 04:01:37.490770"]]
  [1m[36mCardProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 1], ["product_id", 2], ["created_at", "2023-11-12 04:01:37.491691"], ["updated_at", "2023-11-12 04:01:37.491691"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (29.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "product_backend_development"[0m
  [1m[35m (20.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "product_backend_test"[0m
  [1m[35m (44.5ms)[0m  [1m[35mCREATE DATABASE "product_backend_development" ENCODING = 'unicode'[0m
  [1m[35m (34.1ms)[0m  [1m[35mCREATE DATABASE "product_backend_test" ENCODING = 'unicode'[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_try_advisory_lock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2023-11-12 04:03:03.996333', '2023-11-12 04:03:03.996335') RETURNING "key"[0m
Migrating to CreateUsers (20231110152455)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "role" character varying, "status" boolean, "password_digest" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110152455') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCards (20231110153707)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "cards" ("id" bigserial primary key, "name" character varying, "price" decimal, "pin" character varying, "status" character varying, "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_8ef7749967"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_cards_on_user_id" ON "cards" ("user_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110153707') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBrands (20231110155231)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "brands" ("id" bigserial primary key, "name" character varying, "avatar" character varying, "short_name" character varying, "status" boolean, "store_number" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110155231') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProducts (20231110155459)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying, "avatar" character varying, "sku" character varying, "status" boolean, "price" decimal, "brand_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f3b4d49caa"
FOREIGN KEY ("brand_id")
  REFERENCES "brands" ("id")
)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_products_on_brand_id" ON "products" ("brand_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110155459') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCardProducts (20231110160118)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "card_products" ("id" bigserial primary key, "card_id" bigint NOT NULL, "product_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f95aa900bf"
FOREIGN KEY ("card_id")
  REFERENCES "cards" ("id")
, CONSTRAINT "fk_rails_0c6f04d089"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_card_products_on_card_id" ON "card_products" ("card_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_card_products_on_product_id" ON "card_products" ("product_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110160118') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mBrand Load (0.6ms)[0m  [1m[34mSELECT "brands".* FROM "brands"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.9ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "KFC"], ["avatar", "https://www.gravatar.com/avatar/5?s=64&d=identicon&r=PG"], ["short_name", "KFC"], ["status", true], ["store_number", 12], ["created_at", "2023-11-12 04:03:11.402362"], ["updated_at", "2023-11-12 04:03:11.402362"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.6ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "the coffee house"], ["avatar", "https://www.gravatar.com/avatar/5?s=64&d=identicon&r=PG"], ["short_name", "TCH"], ["status", true], ["store_number", 232], ["created_at", "2023-11-12 04:03:11.442107"], ["updated_at", "2023-11-12 04:03:11.442107"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.5ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "circle K"], ["avatar", "https://www.gravatar.com/avatar/12?s=64&d=identicon&r=PG"], ["short_name", "CRK"], ["status", true], ["store_number", 156], ["created_at", "2023-11-12 04:03:11.455527"], ["updated_at", "2023-11-12 04:03:11.455527"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mBrand Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "brands"[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "role", "status", "password_digest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "admin@test.com"], ["name", "Admin"], ["role", "Admin"], ["status", true], ["password_digest", "[FILTERED]"], ["created_at", "2023-11-12 04:03:11.492380"], ["updated_at", "2023-11-12 04:03:11.492380"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@test.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Load (0.2ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Create (1.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "avatar", "sku", "status", "price", "brand_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "hambeger"], ["avatar", "https://www.gravatar.com/avatar/9?s=128&d=identicon&r=PG"], ["sku", "HBG"], ["status", true], ["price", "12.0"], ["brand_id", 1], ["created_at", "2023-11-12 04:03:11.541569"], ["updated_at", "2023-11-12 04:03:11.541569"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Load (0.6ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Create (0.8ms)[0m  [1m[32mINSERT INTO "products" ("name", "avatar", "sku", "status", "price", "brand_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "Drinking beer"], ["avatar", "https://www.gravatar.com/avatar/4?s=128&d=identicon&r=PG"], ["sku", "BER"], ["status", true], ["price", "21.0"], ["brand_id", 2], ["created_at", "2023-11-12 04:03:12.118251"], ["updated_at", "2023-11-12 04:03:12.118251"]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCard Create (1.3ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Black Card"], ["price", "124.0"], ["pin", "123456"], ["status", nil], ["user_id", 1], ["created_at", "2023-11-12 04:03:26.240330"], ["updated_at", "2023-11-12 04:03:26.240330"]]
  [1m[36mCardProduct Create (1.6ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 1], ["product_id", 1], ["created_at", "2023-11-12 04:03:26.242384"], ["updated_at", "2023-11-12 04:03:26.242384"]]
  [1m[36mCardProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 1], ["product_id", 2], ["created_at", "2023-11-12 04:03:26.244388"], ["updated_at", "2023-11-12 04:03:26.244388"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (2.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCard Create (0.9ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Black Card"], ["price", "124.0"], ["pin", "123456"], ["status", nil], ["user_id", 1], ["created_at", "2023-11-12 04:04:56.942397"], ["updated_at", "2023-11-12 04:04:56.942397"]]
  [1m[36mCardProduct Create (0.5ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 2], ["product_id", 1], ["created_at", "2023-11-12 04:04:56.944325"], ["updated_at", "2023-11-12 04:04:56.944325"]]
  [1m[36mCardProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 2], ["product_id", 2], ["created_at", "2023-11-12 04:04:56.945312"], ["updated_at", "2023-11-12 04:04:56.945312"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCard Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "cards"[0m
  [1m[36mCard Load (0.5ms)[0m  [1m[34mSELECT "cards".* FROM "cards" WHERE "cards"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (41.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "product_backend_development"[0m
  [1m[35m (19.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "product_backend_test"[0m
  [1m[35m (45.3ms)[0m  [1m[35mCREATE DATABASE "product_backend_development" ENCODING = 'unicode'[0m
  [1m[35m (34.3ms)[0m  [1m[35mCREATE DATABASE "product_backend_test" ENCODING = 'unicode'[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_try_advisory_lock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2023-11-12 04:06:12.967926', '2023-11-12 04:06:12.967929') RETURNING "key"[0m
Migrating to CreateUsers (20231110152455)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "role" character varying, "status" boolean, "password_digest" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110152455') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCards (20231110153707)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "cards" ("id" bigserial primary key, "name" character varying, "price" decimal, "pin" character varying, "status" character varying, "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_8ef7749967"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_cards_on_user_id" ON "cards" ("user_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110153707') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBrands (20231110155231)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "brands" ("id" bigserial primary key, "name" character varying, "avatar" character varying, "short_name" character varying, "status" boolean, "store_number" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110155231') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProducts (20231110155459)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying, "avatar" character varying, "sku" character varying, "status" boolean, "price" decimal, "brand_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f3b4d49caa"
FOREIGN KEY ("brand_id")
  REFERENCES "brands" ("id")
)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_products_on_brand_id" ON "products" ("brand_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110155459') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCardProducts (20231110160118)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "card_products" ("id" bigserial primary key, "card_id" bigint NOT NULL, "product_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f95aa900bf"
FOREIGN KEY ("card_id")
  REFERENCES "cards" ("id")
, CONSTRAINT "fk_rails_0c6f04d089"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_card_products_on_card_id" ON "card_products" ("card_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_card_products_on_product_id" ON "card_products" ("product_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110160118') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mBrand Load (0.2ms)[0m  [1m[34mSELECT "brands".* FROM "brands"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.6ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "KFC"], ["avatar", "https://www.gravatar.com/avatar/8?s=64&d=identicon&r=PG"], ["short_name", "KFC"], ["status", true], ["store_number", 12], ["created_at", "2023-11-12 04:06:13.030869"], ["updated_at", "2023-11-12 04:06:13.030869"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.4ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "the coffee house"], ["avatar", "https://www.gravatar.com/avatar/5?s=64&d=identicon&r=PG"], ["short_name", "TCH"], ["status", true], ["store_number", 232], ["created_at", "2023-11-12 04:06:13.032795"], ["updated_at", "2023-11-12 04:06:13.032795"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.5ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "circle K"], ["avatar", "https://www.gravatar.com/avatar/13?s=64&d=identicon&r=PG"], ["short_name", "CRK"], ["status", true], ["store_number", 156], ["created_at", "2023-11-12 04:06:13.034085"], ["updated_at", "2023-11-12 04:06:13.034085"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mBrand Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "brands"[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "role", "status", "password_digest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "admin@test.com"], ["name", "Admin"], ["role", "Admin"], ["status", true], ["password_digest", "[FILTERED]"], ["created_at", "2023-11-12 04:06:13.041738"], ["updated_at", "2023-11-12 04:06:13.041738"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@test.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Load (0.1ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "avatar", "sku", "status", "price", "brand_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "hambeger"], ["avatar", "https://www.gravatar.com/avatar/2?s=128&d=identicon&r=PG"], ["sku", "HBG"], ["status", true], ["price", "12.0"], ["brand_id", 1], ["created_at", "2023-11-12 04:06:13.053873"], ["updated_at", "2023-11-12 04:06:13.053873"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Load (0.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "avatar", "sku", "status", "price", "brand_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "Drinking beer"], ["avatar", "https://www.gravatar.com/avatar/5?s=128&d=identicon&r=PG"], ["sku", "BER"], ["status", true], ["price", "21.0"], ["brand_id", 2], ["created_at", "2023-11-12 04:06:13.056378"], ["updated_at", "2023-11-12 04:06:13.056378"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mCard Load (0.1ms)[0m  [1m[34mSELECT "cards".* FROM "cards"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCard Create (0.2ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Black Card"], ["price", "124.0"], ["pin", "123456"], ["status", nil], ["user_id", 1], ["created_at", "2023-11-12 04:06:13.072335"], ["updated_at", "2023-11-12 04:06:13.072335"]]
  [1m[36mCardProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 1], ["product_id", 1], ["created_at", "2023-11-12 04:06:13.073328"], ["updated_at", "2023-11-12 04:06:13.073328"]]
  [1m[36mCardProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 1], ["product_id", 2], ["created_at", "2023-11-12 04:06:13.074156"], ["updated_at", "2023-11-12 04:06:13.074156"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCard Load (0.1ms)[0m  [1m[34mSELECT "cards".* FROM "cards" ORDER BY "cards"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/auth/login" for ::1 at 2023-11-12 15:48:27 +0700
  [1m[36mActiveRecord::SchemaMigration Load (4.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"admin@test.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@test.com"], ["LIMIT", 1]]
  ↳ app/controllers/authentication_controller.rb:4:in `login'
Completed 500 Internal Server Error in 36ms (ActiveRecord: 10.4ms | Allocations: 23449)


  
BCrypt::Errors::InvalidHash (invalid hash):
  
app/controllers/authentication_controller.rb:5:in `login'
Started POST "/auth/login" for ::1 at 2023-11-12 15:50:10 +0700
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"admin@test.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@test.com"], ["LIMIT", 1]]
  ↳ app/controllers/authentication_controller.rb:4:in `login'
Completed 500 Internal Server Error in 12ms (ActiveRecord: 6.7ms | Allocations: 5919)


  
BCrypt::Errors::InvalidHash (invalid hash):
  
app/controllers/authentication_controller.rb:5:in `login'
Started POST "/auth/login" for ::1 at 2023-11-12 15:51:13 +0700
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"admin@test.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@test.com"], ["LIMIT", 1]]
  ↳ app/controllers/authentication_controller.rb:4:in `login'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for pp */ LIMIT $1[0m  [["LIMIT", 11]]
  ↳ app/controllers/authentication_controller.rb:5:in `login'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ (rdbg)//Users/thaiphuc/projects/product_app/product-backend/app/controllers/authentication_controller.rb:1:in `login'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ (rdbg)//Users/thaiphuc/projects/product_app/product-backend/app/controllers/authentication_controller.rb:1:in `login'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ (rdbg)//Users/thaiphuc/projects/product_app/product-backend/app/controllers/authentication_controller.rb:1:in `login'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ (rdbg)//Users/thaiphuc/projects/product_app/product-backend/app/controllers/authentication_controller.rb:1:in `login'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  ↳ (rdbg)//Users/thaiphuc/projects/product_app/product-backend/app/controllers/authentication_controller.rb:1:in `login'
  [1m[36mUser Update (10.2ms)[0m  [1m[33mUPDATE "users" SET "password_digest" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["password_digest", "[FILTERED]"], ["updated_at", "2023-11-12 08:56:03.506435"], ["id", 1]]
  ↳ (rdbg)//Users/thaiphuc/projects/product_app/product-backend/app/controllers/authentication_controller.rb:1:in `login'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ (rdbg)//Users/thaiphuc/projects/product_app/product-backend/app/controllers/authentication_controller.rb:1:in `login'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ (rdbg)//Users/thaiphuc/projects/product_app/product-backend/app/controllers/authentication_controller.rb:1:in `login'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ (rdbg)//Users/thaiphuc/projects/product_app/product-backend/app/controllers/authentication_controller.rb:1:in `login'
  [1m[36mTRANSACTION (4.8ms)[0m  [1m[35mBEGIN[0m
  ↳ (rdbg)//Users/thaiphuc/projects/product_app/product-backend/app/controllers/authentication_controller.rb:1:in `login'
  [1m[36mUser Update (7.7ms)[0m  [1m[33mUPDATE "users" SET "password_digest" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["password_digest", "[FILTERED]"], ["updated_at", "2023-11-12 08:57:46.030832"], ["id", 1]]
  ↳ (rdbg)//Users/thaiphuc/projects/product_app/product-backend/app/controllers/authentication_controller.rb:1:in `login'
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ (rdbg)//Users/thaiphuc/projects/product_app/product-backend/app/controllers/authentication_controller.rb:1:in `login'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ (rdbg)//Users/thaiphuc/projects/product_app/product-backend/app/controllers/authentication_controller.rb:1:in `login'
Completed 500 Internal Server Error in 416506ms (ActiveRecord: 35.6ms | Allocations: 445212)


  
SystemExit (exit):
  
(rdbg)//Users/thaiphuc/projects/product_app/product-backend/app/controllers/authentication_controller.rb:1:in `exit'
(rdbg)//Users/thaiphuc/projects/product_app/product-backend/app/controllers/authentication_controller.rb:1:in `login'
app/controllers/authentication_controller.rb:5:in `login'
Started POST "/auth/login" for ::1 at 2023-11-12 15:59:42 +0700
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"admin@test.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@test.com"], ["LIMIT", 1]]
  ↳ app/controllers/authentication_controller.rb:4:in `login'
Completed 500 Internal Server Error in 10ms (ActiveRecord: 4.4ms | Allocations: 5956)


  
BCrypt::Errors::InvalidHash (invalid hash):
  
app/controllers/authentication_controller.rb:6:in `login'
Started POST "/auth/login" for ::1 at 2023-11-12 15:59:53 +0700
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"admin@test.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@test.com"], ["LIMIT", 1]]
  ↳ app/controllers/authentication_controller.rb:4:in `login'
Completed 500 Internal Server Error in 68347ms (ActiveRecord: 33.7ms | Allocations: 220908)


  
SystemExit (exit):
  
(rdbg)//Users/thaiphuc/projects/product_app/product-backend/app/controllers/authentication_controller.rb:1:in `exit'
(rdbg)//Users/thaiphuc/projects/product_app/product-backend/app/controllers/authentication_controller.rb:1:in `login'
app/controllers/authentication_controller.rb:5:in `login'
Started POST "/auth/login" for ::1 at 2023-11-12 16:01:27 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ArgumentError (Before process_action callback :authenticate_user has not been defined):
  
app/controllers/authentication_controller.rb:2:in `<class:AuthenticationController>'
app/controllers/authentication_controller.rb:1:in `<main>'
Started POST "/auth/login" for ::1 at 2023-11-12 16:01:45 +0700
  
ArgumentError (Before process_action callback :authenticate_user has not been defined):
  
app/controllers/authentication_controller.rb:2:in `<class:AuthenticationController>'
app/controllers/authentication_controller.rb:1:in `<main>'
Started POST "/auth/login" for ::1 at 2023-11-12 16:02:05 +0700
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"admin@test.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@test.com"], ["LIMIT", 1]]
  ↳ app/controllers/authentication_controller.rb:4:in `login'
Completed 500 Internal Server Error in 172786ms (ActiveRecord: 10.1ms | Allocations: 208295)


  
SystemExit (exit):
  
(rdbg)//Users/thaiphuc/projects/product_app/product-backend/app/controllers/authentication_controller.rb:1:in `exit'
(rdbg)//Users/thaiphuc/projects/product_app/product-backend/app/controllers/authentication_controller.rb:1:in `login'
app/controllers/authentication_controller.rb:5:in `login'
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mBrand Load (2.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."brand_id" = $1[0m  [["brand_id", 1]]
  [1m[36mProduct Destroy (2.9ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = $1[0m  [["id", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (27.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "product_backend_development"[0m
  [1m[35m (24.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "product_backend_test"[0m
  [1m[35m (113.1ms)[0m  [1m[35mCREATE DATABASE "product_backend_development" ENCODING = 'unicode'[0m
  [1m[35m (44.6ms)[0m  [1m[35mCREATE DATABASE "product_backend_test" ENCODING = 'unicode'[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2023-11-12 09:06:24.857639', '2023-11-12 09:06:24.857645') RETURNING "key"[0m
Migrating to CreateUsers (20231110152455)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "name" character varying, "role" character varying, "status" boolean, "password_digest" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110152455') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCards (20231110153707)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "cards" ("id" bigserial primary key, "name" character varying, "price" decimal, "pin" character varying, "status" character varying, "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_8ef7749967"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_cards_on_user_id" ON "cards" ("user_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110153707') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBrands (20231110155231)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "brands" ("id" bigserial primary key, "name" character varying, "avatar" character varying, "short_name" character varying, "status" boolean, "store_number" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110155231') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProducts (20231110155459)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying, "avatar" character varying, "sku" character varying, "status" boolean, "price" decimal, "brand_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f3b4d49caa"
FOREIGN KEY ("brand_id")
  REFERENCES "brands" ("id")
)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_products_on_brand_id" ON "products" ("brand_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110155459') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCardProducts (20231110160118)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "card_products" ("id" bigserial primary key, "card_id" bigint NOT NULL, "product_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f95aa900bf"
FOREIGN KEY ("card_id")
  REFERENCES "cards" ("id")
, CONSTRAINT "fk_rails_0c6f04d089"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_card_products_on_card_id" ON "card_products" ("card_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_card_products_on_product_id" ON "card_products" ("product_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20231110160118') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(6960079912003642935)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mBrand Load (0.2ms)[0m  [1m[34mSELECT "brands".* FROM "brands"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.6ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "KFC"], ["avatar", "https://www.gravatar.com/avatar/5?s=64&d=identicon&r=PG"], ["short_name", "KFC"], ["status", true], ["store_number", 12], ["created_at", "2023-11-12 09:06:24.926459"], ["updated_at", "2023-11-12 09:06:24.926459"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.4ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "the coffee house"], ["avatar", "https://www.gravatar.com/avatar/3?s=64&d=identicon&r=PG"], ["short_name", "TCH"], ["status", true], ["store_number", 232], ["created_at", "2023-11-12 09:06:24.928433"], ["updated_at", "2023-11-12 09:06:24.928433"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Create (0.5ms)[0m  [1m[32mINSERT INTO "brands" ("name", "avatar", "short_name", "status", "store_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "circle K"], ["avatar", "https://www.gravatar.com/avatar/4?s=64&d=identicon&r=PG"], ["short_name", "CRK"], ["status", true], ["store_number", 156], ["created_at", "2023-11-12 09:06:24.929689"], ["updated_at", "2023-11-12 09:06:24.929689"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mBrand Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "brands"[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (1.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name", "role", "status", "password_digest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "admin@test.com"], ["name", "Admin"], ["role", "Admin"], ["status", true], ["password_digest", "[FILTERED]"], ["created_at", "2023-11-12 09:06:25.183120"], ["updated_at", "2023-11-12 09:06:25.183120"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@test.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Load (0.2ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Create (1.5ms)[0m  [1m[32mINSERT INTO "products" ("name", "avatar", "sku", "status", "price", "brand_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "hambeger"], ["avatar", "https://www.gravatar.com/avatar/11?s=128&d=identicon&r=PG"], ["sku", "HBG"], ["status", true], ["price", "12.0"], ["brand_id", 1], ["created_at", "2023-11-12 09:06:25.202108"], ["updated_at", "2023-11-12 09:06:25.202108"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mBrand Load (0.2ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "avatar", "sku", "status", "price", "brand_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "Drinking beer"], ["avatar", "https://www.gravatar.com/avatar/0?s=128&d=identicon&r=PG"], ["sku", "BER"], ["status", true], ["price", "21.0"], ["brand_id", 2], ["created_at", "2023-11-12 09:06:25.205664"], ["updated_at", "2023-11-12 09:06:25.205664"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mCard Load (0.5ms)[0m  [1m[34mSELECT "cards".* FROM "cards"[0m
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN ($1, $2)[0m  [["id", 1], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCard Create (0.9ms)[0m  [1m[32mINSERT INTO "cards" ("name", "price", "pin", "status", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "Black Card"], ["price", "124.0"], ["pin", "123456"], ["status", nil], ["user_id", 1], ["created_at", "2023-11-12 09:06:25.228450"], ["updated_at", "2023-11-12 09:06:25.228450"]]
  [1m[36mCardProduct Create (1.8ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 1], ["product_id", 1], ["created_at", "2023-11-12 09:06:25.229949"], ["updated_at", "2023-11-12 09:06:25.229949"]]
  [1m[36mCardProduct Create (0.6ms)[0m  [1m[32mINSERT INTO "card_products" ("card_id", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["card_id", 1], ["product_id", 2], ["created_at", "2023-11-12 09:06:25.232323"], ["updated_at", "2023-11-12 09:06:25.232323"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCard Load (0.2ms)[0m  [1m[34mSELECT "cards".* FROM "cards" ORDER BY "cards"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/auth/login" for ::1 at 2023-11-12 16:06:34 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"admin@test.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@test.com"], ["LIMIT", 1]]
  ↳ app/controllers/authentication_controller.rb:4:in `login'
Completed 500 Internal Server Error in 72957ms (ActiveRecord: 7.4ms | Allocations: 231290)


  
SystemExit (exit):
  
(rdbg)//Users/thaiphuc/projects/product_app/product-backend/app/controllers/authentication_controller.rb:1:in `exit'
(rdbg)//Users/thaiphuc/projects/product_app/product-backend/app/controllers/authentication_controller.rb:1:in `login'
app/controllers/authentication_controller.rb:5:in `login'
Started POST "/auth/login" for ::1 at 2023-11-12 16:07:56 +0700
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthenticationController#login as */*
  Parameters: {"email"=>"admin@test.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@test.com"], ["LIMIT", 1]]
  ↳ app/controllers/authentication_controller.rb:4:in `login'
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from encode at /Users/thaiphuc/projects/product_app/product-backend/services/json_web_token_service.rb:7)
Completed 202 Accepted in 2887ms (Views: 0.3ms | ActiveRecord: 14.2ms | Allocations: 172668)


Started GET "/me" for ::1 at 2023-11-12 16:09:25 +0700
Processing by RegistrationsController#me as */*
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product_app/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@test.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 0.9ms | Allocations: 1268)


Started GET "/brands" for ::1 at 2023-11-12 16:09:47 +0700
  
ActionController::RoutingError (No route matches [GET] "/brands"):
  
Started GET "/api/v1/brands" for ::1 at 2023-11-12 16:10:02 +0700
Processing by Api::V1::BrandsController#index as */*
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product_app/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@test.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mBrand Load (1.0ms)[0m  [1m[34mSELECT "brands".* FROM "brands"[0m
  ↳ app/controllers/api/v1/brands_controller.rb:10:in `index'
Completed 200 OK in 24ms (Views: 5.1ms | ActiveRecord: 10.8ms | Allocations: 14771)


Started GET "/api/v1/products" for ::1 at 2023-11-12 16:10:08 +0700
Processing by Api::V1::ProductsController#index as */*
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product_app/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@test.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:10:in `index'
Completed 200 OK in 15ms (Views: 5.3ms | ActiveRecord: 3.6ms | Allocations: 10447)


Started GET "/api/v1/cards" for ::1 at 2023-11-12 16:36:48 +0700
Processing by Api::V1::CardsController#index as */*
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product_app/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@test.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mCard Load (1.3ms)[0m  [1m[34mSELECT "cards".* FROM "cards"[0m
  ↳ app/controllers/api/v1/cards_controller.rb:10:in `index'
Completed 200 OK in 53ms (Views: 6.1ms | ActiveRecord: 16.4ms | Allocations: 11916)


Started GET "/api/v1/cards/1/products" for ::1 at 2023-11-12 16:36:57 +0700
  
ActionController::RoutingError (No route matches [GET] "/api/v1/cards/1/products"):
  
Started GET "/api/v1/clients/products" for ::1 at 2023-11-12 16:37:55 +0700
Processing by Api::V1::ReportsController#all_products_of_user as */*
DEPRECATION WARNING: `Rails.application.secrets` is deprecated in favor of `Rails.application.credentials` and will be removed in Rails 7.2. (called from decode at /Users/thaiphuc/projects/product_app/product-backend/services/json_web_token_service.rb:12)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@test.com"], ["LIMIT", 1]]
  ↳ lib/authenticate_helper.rb:5:in `authenticate_user'
  [1m[36mCard Pluck (0.3ms)[0m  [1m[34mSELECT "cards"."id" FROM "cards" WHERE "cards"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/controllers/api/v1/reports_controller.rb:9:in `all_products_of_user'
  [1m[36mProduct Load (3.0ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "card_products" ON "card_products"."product_id" = "products"."id" INNER JOIN "cards" ON "cards"."id" = "card_products"."card_id" WHERE (card_id in (1))[0m
  ↳ app/controllers/api/v1/reports_controller.rb:11:in `all_products_of_user'
Completed 200 OK in 30ms (Views: 8.8ms | ActiveRecord: 4.2ms | Allocations: 6990)


